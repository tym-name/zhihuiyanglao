{
  "version": 3,
  "sources": ["../../pinia-plugin-persistedstate/dist/index.js"],
  "sourcesContent": ["//#region src/runtime/utils.ts\r\nfunction get(obj, path) {\r\n\tif (obj == null) return void 0;\r\n\tlet value = obj;\r\n\tfor (let i = 0; i < path.length; i++) {\r\n\t\tif (value === void 0 || value[path[i]] === void 0) return void 0;\r\n\t\tif (value === null || value[path[i]] === null) return null;\r\n\t\tvalue = value[path[i]];\r\n\t}\r\n\treturn value;\r\n}\r\nfunction set(obj, value, path) {\r\n\tif (path.length === 0) return value;\r\n\tconst idx = path[0];\r\n\tif (path.length > 1) value = set(typeof obj !== \"object\" || obj === null || !Object.prototype.hasOwnProperty.call(obj, idx) ? Number.isInteger(Number(path[1])) ? [] : {} : obj[idx], value, Array.prototype.slice.call(path, 1));\r\n\tif (Number.isInteger(Number(idx)) && Array.isArray(obj)) return obj.slice()[idx];\r\n\treturn Object.assign({}, obj, { [idx]: value });\r\n}\r\nfunction unset(obj, path) {\r\n\tif (obj == null || path.length === 0) return obj;\r\n\tif (path.length === 1) {\r\n\t\tif (obj == null) return obj;\r\n\t\tif (Number.isInteger(path[0]) && Array.isArray(obj)) return Array.prototype.slice.call(obj, 0).splice(path[0], 1);\r\n\t\tconst result = {};\r\n\t\tfor (const p in obj) result[p] = obj[p];\r\n\t\tdelete result[path[0]];\r\n\t\treturn result;\r\n\t}\r\n\tif (obj[path[0]] == null) {\r\n\t\tif (Number.isInteger(path[0]) && Array.isArray(obj)) return Array.prototype.concat.call([], obj);\r\n\t\tconst result = {};\r\n\t\tfor (const p in obj) result[p] = obj[p];\r\n\t\treturn result;\r\n\t}\r\n\treturn set(obj, unset(obj[path[0]], Array.prototype.slice.call(path, 1)), [path[0]]);\r\n}\r\nfunction deepPick(obj, paths) {\r\n\treturn paths.map((p) => p.split(\".\")).map((p) => [p, get(obj, p)]).filter((t) => t[1] !== void 0).reduce((acc, cur) => set(acc, cur[1], cur[0]), {});\r\n}\r\nfunction deepOmit(obj, paths) {\r\n\treturn paths.map((p) => p.split(\".\")).reduce((acc, cur) => unset(acc, cur), obj);\r\n}\r\n\r\n//#endregion\r\n//#region src/runtime/core.ts\r\nfunction hydrateStore(store, { storage, serializer, key, debug, pick, omit, beforeHydrate, afterHydrate }, context, runHooks = true) {\r\n\ttry {\r\n\t\tif (runHooks) beforeHydrate?.(context);\r\n\t\tconst fromStorage = storage.getItem(key);\r\n\t\tif (fromStorage) {\r\n\t\t\tconst deserialized = serializer.deserialize(fromStorage);\r\n\t\t\tconst picked = pick ? deepPick(deserialized, pick) : deserialized;\r\n\t\t\tconst omitted = omit ? deepOmit(picked, omit) : picked;\r\n\t\t\tstore.$patch(omitted);\r\n\t\t}\r\n\t\tif (runHooks) afterHydrate?.(context);\r\n\t} catch (error) {\r\n\t\tif (debug) console.error(\"[pinia-plugin-persistedstate]\", error);\r\n\t}\r\n}\r\nfunction persistState(state, { storage, serializer, key, debug, pick, omit }) {\r\n\ttry {\r\n\t\tconst picked = pick ? deepPick(state, pick) : state;\r\n\t\tconst omitted = omit ? deepOmit(picked, omit) : picked;\r\n\t\tconst toStorage = serializer.serialize(omitted);\r\n\t\tstorage.setItem(key, toStorage);\r\n\t} catch (error) {\r\n\t\tif (debug) console.error(\"[pinia-plugin-persistedstate]\", error);\r\n\t}\r\n}\r\nfunction parsePersistKey(key, storeId) {\r\n\treturn typeof key === \"function\" ? key(storeId) : typeof key === \"string\" ? key : storeId;\r\n}\r\nfunction createPersistence(context, optionsParser, auto) {\r\n\tconst { pinia, store, options: { persist = auto } } = context;\r\n\tif (!persist) return;\r\n\t// v8 ignore if -- @preserve\r\n\tif (!(store.$id in pinia.state.value)) {\r\n\t\tconst originalStore = pinia._s.get(store.$id.replace(\"__hot:\", \"\"));\r\n\t\tif (originalStore) Promise.resolve().then(() => originalStore.$persist());\r\n\t\treturn;\r\n\t}\r\n\tconst persistences = (Array.isArray(persist) ? persist : persist === true ? [{}] : [persist]).map(optionsParser);\r\n\tstore.$hydrate = ({ runHooks = true } = {}) => {\r\n\t\tpersistences.forEach((p) => {\r\n\t\t\thydrateStore(store, p, context, runHooks);\r\n\t\t});\r\n\t};\r\n\tstore.$persist = () => {\r\n\t\tpersistences.forEach((p) => {\r\n\t\t\tpersistState(store.$state, p);\r\n\t\t});\r\n\t};\r\n\tpersistences.forEach((p) => {\r\n\t\thydrateStore(store, p, context);\r\n\t\tstore.$subscribe((_mutation, state) => persistState(state, p), { detached: true });\r\n\t});\r\n}\r\n\r\n//#endregion\r\n//#region src/index.ts\r\n/**\r\n* Create a Pinia persistence plugin.\r\n* @see https://codeberg.org/praz/pinia-plugin-persistedstate\r\n*/\r\nfunction createPersistedState(options = {}) {\r\n\treturn function(context) {\r\n\t\tcreatePersistence(context, (p) => {\r\n\t\t\tconst persistKey = parsePersistKey(p.key, context.store.$id);\r\n\t\t\treturn {\r\n\t\t\t\tkey: (options.key ? options.key : (x) => x)(persistKey),\r\n\t\t\t\tdebug: p.debug ?? options.debug ?? false,\r\n\t\t\t\tserializer: p.serializer ?? options.serializer ?? {\r\n\t\t\t\t\tserialize: (data) => JSON.stringify(data),\r\n\t\t\t\t\tdeserialize: (data) => JSON.parse(data)\r\n\t\t\t\t},\r\n\t\t\t\tstorage: p.storage ?? options.storage ?? window.localStorage,\r\n\t\t\t\tbeforeHydrate: p.beforeHydrate ?? options.beforeHydrate,\r\n\t\t\t\tafterHydrate: p.afterHydrate ?? options.afterHydrate,\r\n\t\t\t\tpick: p.pick,\r\n\t\t\t\tomit: p.omit\r\n\t\t\t};\r\n\t\t}, options.auto ?? false);\r\n\t};\r\n}\r\n/**\r\n* Pinia plugin to persist stores.\r\n* @see https://codeberg.org/praz/pinia-plugin-persistedstate\r\n*/\r\nvar src_default = createPersistedState();\r\n\r\n//#endregion\r\nexport { createPersistedState, src_default as default };"],
  "mappings": "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",
  "names": []
}
