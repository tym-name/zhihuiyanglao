import{n as B,a as E}from"./nursingService-CyisoriW.js";import{d as N,m as p,i as U,r as v,k as _,l as g,a as n,c as D,b as R,e as a,w as s,g as S,f as V,h as d}from"./index-D6YPj1KB.js";const T={class:"dialog-footer"},q=N({__name:"HouseTypeAdd",props:p({editData:{}},{modelValue:{},modelModifiers:{}}),emits:p(["save-success"],["update:modelValue"]),setup(c,{emit:b}){const r=U(c,"modelValue"),y=c,u=v(),t=_({name:"",content:"",id:0}),l=v(!1),w=_({name:[{required:!0,message:"请输入房型名称",trigger:"blur"}]}),k=b,m=()=>{t.name="",t.content="",t.id=0,u.value?.clearValidate()};g(()=>y.editData,o=>{o?(l.value=!0,Object.assign(t,o),console.log("子组件接收的编辑数据：",o)):(l.value=!1,m())},{immediate:!0}),g(r,o=>{o||m()});const x=async()=>{if(u.value)try{await u.value.validate()}catch{d.error("表单校验失败，请完善必填项");return}try{l.value?(await B(t),d.success("更新成功")):(await E(t),d.success("添加成功")),r.value=!1,k("save-success"),m()}catch(o){d.error(l.value?"更新失败，请重试":"添加失败，请重试"),console.error(l.value?"服务更新失败":"服务添加失败",o)}};return(o,e)=>{const C=n("el-input"),F=n("el-form-item"),M=n("el-form"),f=n("el-button"),A=n("el-dialog");return R(),D("div",null,[a(A,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=i=>r.value=i),title:l.value?"编辑房型":"新增房型",width:"500"},{footer:s(()=>[S("div",T,[a(f,{onClick:e[1]||(e[1]=i=>r.value=!1)},{default:s(()=>[...e[3]||(e[3]=[V("取消",-1)])]),_:1}),a(f,{type:"primary",onClick:x},{default:s(()=>[...e[4]||(e[4]=[V(" 提交 ",-1)])]),_:1})])]),default:s(()=>[a(M,{ref_key:"ruleFormRef",ref:u,style:{"max-width":"600px"},model:t,rules:w,"label-width":"auto"},{default:s(()=>[a(F,{label:"房型名称",prop:"name"},{default:s(()=>[a(C,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=i=>t.name=i),placeholder:"请输入房型名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{q as default};
