import{D as d,d as F,m as _,i as M,r as V,k as S,l as b,b as u,c as U,a as B,e as a,w as r,f as N,g as y,t as h,E as m}from"./index-DSXWNbz6.js";const L=e=>d.get("/nursingService/list",e),q=e=>d.post("/nursingService/add",e),R=e=>d.put("/nursingService/update",e),O=e=>d.delete(`/nursingService/delete/${e}`),P=e=>d.post("/nursingService/deleteAll",e),$={class:"dialog-footer"},T=F({__name:"nursingServiceAdd",props:_({editData:{}},{modelValue:{},modelModifiers:{}}),emits:_(["save-success"],["update:modelValue"]),setup(e,{emit:w}){const i=M(e,"modelValue"),x=e,c=V(),t=S({name:"",content:"",id:0}),s=V(!1),k=S({name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],content:[{required:!0,message:"请输入服务描述",trigger:"blur"}]}),D=w,p=()=>{t.name="",t.content="",t.id=0,c.value?.clearValidate()};b(()=>x.editData,o=>{o?(s.value=!0,Object.assign(t,o),console.log("子组件接收的编辑数据：",o)):(s.value=!1,p())},{immediate:!0}),b(i,o=>{o||p()});const A=async()=>{if(c.value)try{await c.value.validate()}catch{m.error("表单校验失败，请完善必填项");return}try{s.value?(await R(t),m.success("更新成功")):(await q(t),m.success("添加成功")),i.value=!1,D("save-success"),p()}catch(o){m.error(s.value?"更新失败，请重试":"添加失败，请重试"),console.error(s.value?"服务更新失败":"服务添加失败",o)}};return(o,l)=>{const v=u("el-input"),f=u("el-form-item"),C=u("el-form"),g=u("el-button"),E=u("el-dialog");return B(),U("div",null,[a(E,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=n=>i.value=n),title:s.value?"编辑服务":"新增服务",width:"500"},{footer:r(()=>[N("div",$,[a(g,{onClick:l[2]||(l[2]=n=>i.value=!1)},{default:r(()=>[...l[4]||(l[4]=[y("取消",-1)])]),_:1}),a(g,{type:"primary",onClick:A},{default:r(()=>[y(h(s.value?"更新":"提交"),1)]),_:1})])]),default:r(()=>[a(C,{ref_key:"ruleFormRef",ref:c,style:{"max-width":"600px"},model:t,rules:k,"label-width":"auto"},{default:r(()=>[a(f,{label:"服务名称",prop:"name"},{default:r(()=>[a(v,{modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=n=>t.name=n),placeholder:"请输入服务名称"},null,8,["modelValue"])]),_:1}),a(f,{label:"服务描述",prop:"content"},{default:r(()=>[a(v,{modelValue:t.content,"onUpdate:modelValue":l[1]||(l[1]=n=>t.content=n),rows:2,type:"textarea",placeholder:"请输入服务描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{T as _,O as a,P as b,L as n};
