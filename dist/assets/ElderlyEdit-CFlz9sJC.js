import{d as E,i as q,n as S,a as n,w as t,c as $,F as z,x as T,b as g,e,_ as M,j as K,G as Z,B as ee,p as A,u as x,M as le,h,r as I,k as F,f as _,g as w,m as ae,a7 as te,v as B,l as H,C as oe,D as ue,H as de,A as P,E as re,o as se,R as ne,U as ie,Q as Y,X as me}from"./index-D6YPj1KB.js";import{D as pe,S as ve,C as ce,c as fe,E as be,d as _e}from"./elderly-D3Co0WB3.js";import{u as ge}from"./Uploads-CivtU_D6.js";import{_ as Ve}from"./Relation.vue_vue_type_script_setup_true_lang-X-1nezkQ.js";const ye=E({__name:"PlaceOrigin",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(b){const f=q(b,"modelValue"),a=[{value:"北京市",label:"北京市"},{value:"天津市",label:"天津市"},{value:"河北省",label:"河北省"},{value:"山西省",label:"山西省"},{value:"内蒙古自治区",label:"内蒙古自治区"},{value:"辽宁省",label:"辽宁省"},{value:"吉林省",label:"吉林省"},{value:"黑龙江省",label:"黑龙江省"},{value:"上海市",label:"上海市"},{value:"浙江省",label:"浙江省"},{value:"安徽省",label:"安徽省"},{value:"福建省",label:"福建省"},{value:"江西省",label:"江西省"},{value:"陕西省",label:"陕西省"},{value:"甘肃省",label:"甘肃省"},{value:"宁夏回族自治区",label:"宁夏回族自治区"},{value:"新疆维吾尔自治区",label:"新疆维吾尔自治区"},{value:"台湾省",label:"台湾省"},{value:"香港特别行政区",label:"香港特别行政区"},{value:"奥门特别行政区",label:"奥门特别行政区"},{value:"广东省",label:"广东省"},{value:"广西壮族自治区",label:"广西壮族自治区"},{value:"海南省",label:"海南省"},{value:"重庆市",label:"重庆市"},{value:"四川省",label:"四川省"},{value:"贵州省",label:"贵州省"},{value:"云南省",label:"云南省"},{value:"西藏自治区",label:"西藏自治区"}];return(c,r)=>{const i=n("el-option"),s=n("el-select");return g(),S(s,{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=d=>f.value=d),placeholder:"请选择",style:{width:"240px"}},{default:t(()=>[(g(),$(z,null,T(a,d=>e(i,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])}}}),Ue=M(ye,[["__scopeId","data-v-44a9da62"]]),xe=E({__name:"Ethnicity",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(b){const f=q(b,"modelValue"),a=[{value:"汉族",label:"汉族"},{value:"蒙古族",label:"蒙古族"},{value:"回族",label:"回族"},{value:"藏族",label:"藏族"},{value:"维吾尔族",label:"维吾尔族"},{value:"苗族",label:"苗族"},{value:"彝族",label:"彝族"},{value:"壮族",label:"壮族"},{value:"布依族",label:"布依族"},{value:"朝鲜族",label:"朝鲜族"},{value:"满族",label:"满族"},{value:"侗族",label:"侗族"},{value:"瑶族",label:"瑶族"},{value:"白族",label:"白族"},{value:"土家族",label:"土家族"},{value:"哈尼族",label:"哈尼族"},{value:"哈萨克族",label:"哈萨克族"},{value:"傣族",label:"傣族"},{value:"黎族",label:"黎族"},{value:"傈僳族",label:"傈僳族"},{value:"佤族",label:"佤族"},{value:"畲族",label:"畲族"},{value:"高山族",label:"高山族"},{value:"拉祜族",label:"拉祜族"},{value:"水族",label:"水族"}];return(c,r)=>{const i=n("el-option"),s=n("el-select");return g(),S(s,{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=d=>f.value=d),placeholder:"请选择",style:{width:"240px"}},{default:t(()=>[(g(),$(z,null,T(a,d=>e(i,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])}}}),we=M(xe,[["__scopeId","data-v-bcab28e7"]]),Ce=E({__name:"Politics",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(b){const f=q(b,"modelValue"),a=[{value:"党员",label:"党员"},{value:"共青团员",label:"共青团员"},{value:"群众民主党派成员",label:"群众民主党派成员"},{value:"无党派人士",label:"无党派人士"}];return(c,r)=>{const i=n("el-option"),s=n("el-select");return g(),S(s,{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=d=>f.value=d),placeholder:"请选择政治面貌",style:{width:"240px"}},{default:t(()=>[(g(),$(z,null,T(a,d=>e(i,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])}}}),ke=M(Ce,[["__scopeId","data-v-ffcf382d"]]),he=E({__name:"EducationSelect",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(b){const f=q(b,"modelValue"),a=[{value:"小学",label:"小学"},{value:"初中",label:"初中"},{value:"高中",label:"高中"},{value:"大专",label:"大专"},{value:"本科",label:"本科"},{value:"硕士",label:"硕士"},{value:"博士",label:"博士"}];return(c,r)=>{const i=n("el-option"),s=n("el-select");return g(),S(s,{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=d=>f.value=d),placeholder:"请选择",style:{width:"240px"}},{default:t(()=>[(g(),$(z,null,T(a,d=>e(i,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])}}}),Ie=M(he,[["__scopeId","data-v-d071b732"]]),$e={class:"upload-license"},Ee=["src"],Me=E({__name:"Upload",props:{modelValue:{},uploadUrl:{},uploadHeaders:{default:()=>({})},maxSize:{default:2},allowedTypes:{default:()=>["image/jpeg","image/jpg","image/png"]},tip:{},disabled:{type:Boolean,default:!1},baseUrl:{default:""},isText:{type:Boolean,default:!1}},emits:["update:modelValue","success","error"],setup(b,{emit:f}){const a=b,c=f,r=K(()=>a.modelValue?a.modelValue.startsWith("http")?a.modelValue:`${a.baseUrl}${a.modelValue}`:""),i=(d,u)=>{if(d?.code===1e4&&d.data?.url)c("update:modelValue",d.data.url),c("success",d,u);else{const o=d?.msg||"上传失败";h.error(o),c("error",o)}},s=d=>{if(!a.allowedTypes.includes(d.type)){const u=`上传文件只能是 ${a.allowedTypes.join(", ")} 格式!`;return h.error(u),c("error",u),!1}if(d.size/1024/1024>a.maxSize){const u=`上传文件大小不能超过 ${a.maxSize}MB!`;return h.error(u),c("error",u),!1}return!0};return(d,u)=>{const o=n("el-icon"),l=n("el-upload");return g(),$("div",$e,[e(l,{class:"avatar-uploader",action:b.uploadUrl,headers:b.uploadHeaders,"show-file-list":!1,"on-success":i,"before-upload":s,disabled:b.disabled},Z({default:t(()=>[b.modelValue&&!b.isText?(g(),$("img",{key:0,src:r.value,class:"avatar",style:{width:"148px",height:"148px"}},null,8,Ee)):A("",!0),!b.modelValue&&!b.isText?(g(),S(o,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[e(x(le))]),_:1})):A("",!0)]),_:2},[b.isText?{name:"default",fn:t(()=>[ee(d.$slots,"upload-text",{},void 0,!0)]),key:"0"}:void 0]),1032,["action","headers","disabled"])])}}}),De=M(Me,[["__scopeId","data-v-53d5ffc0"]]),qe={class:"elederly"},Se={class:"block"},Ne=E({__name:"ElderlyInfo",props:{modelValue:{default:()=>({name:"",gender:1,birthday:"",nativePlace:"",nation:"",idCard:"",politics:"",socialCard:"",marriage:"",eduLevel:"",education:"",resident:"",address:"",photo:""})},modelModifiers:{}},emits:["update:modelValue"],setup(b,{expose:f}){const a=q(b,"modelValue"),c=I(),r="http://123.57.237.81:8080/caresystem-server/api",i="http://123.57.237.81:8080/caresystem/",s=r+"/upload/add",d=F({name:[{required:!0,message:"请输入老人姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],birthday:[{required:!0,message:"请选择出生日期",trigger:"change"}],nativePlace:[{required:!0,message:"请选择籍贯",trigger:"blur"}],nation:[{required:!0,message:"请选择民族",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}],politics:[{required:!0,message:"请选择政治面貌",trigger:"blur"}],marriage:[{required:!0,message:"请选择婚姻状况",trigger:"change"}],eduLevel:[{required:!0,message:"请选择受教育程度",trigger:"change"}],education:[{required:!0,message:"请选择最高学历",trigger:"blur"}],resident:[{required:!0,message:"请输入户口所在地",trigger:"blur"}],address:[{required:!0,message:"请输入现居住地址",trigger:"blur"}],photo:[{required:!0,message:"请上传老人照片",trigger:"change"}]});return f({submitForm:async()=>{if(c.value)try{return await c.value.validate(),console.log("表单数据：",a.value),!0}catch(o){return console.error("表单校验失败：",o),!1}}}),(o,l)=>{const U=n("el-input"),V=n("el-form-item"),C=n("el-radio"),k=n("el-radio-group"),m=n("el-date-picker"),v=n("el-form");return g(),$("div",qe,[e(v,{ref_key:"ruleFormRef",ref:c,style:{"max-width":"600px"},model:a.value,rules:d,"label-width":"auto"},{default:t(()=>[e(V,{label:"老人姓名:",prop:"name"},{default:t(()=>[e(U,{modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=p=>a.value.name=p),placeholder:"请输入老人姓名"},null,8,["modelValue"])]),_:1}),e(V,{label:"性别:",prop:"gender"},{default:t(()=>[e(k,{modelValue:a.value.gender,"onUpdate:modelValue":l[1]||(l[1]=p=>a.value.gender=p)},{default:t(()=>[e(C,{value:1,size:"large"},{default:t(()=>[...l[14]||(l[14]=[_("男",-1)])]),_:1}),e(C,{value:2,size:"large"},{default:t(()=>[...l[15]||(l[15]=[_("女",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"出生日期:",prop:"birthday"},{default:t(()=>[w("div",Se,[e(m,{modelValue:a.value.birthday,"onUpdate:modelValue":l[2]||(l[2]=p=>a.value.birthday=p),type:"date",placeholder:"请选择",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"300px",height:"40px"}},null,8,["modelValue"])])]),_:1}),e(V,{label:"籍贯:",prop:"nativePlace"},{default:t(()=>[e(Ue,{modelValue:a.value.nativePlace,"onUpdate:modelValue":l[3]||(l[3]=p=>a.value.nativePlace=p)},null,8,["modelValue"])]),_:1}),e(V,{label:"民族:",prop:"nation"},{default:t(()=>[e(we,{modelValue:a.value.nation,"onUpdate:modelValue":l[4]||(l[4]=p=>a.value.nation=p)},null,8,["modelValue"])]),_:1}),e(V,{label:"身份证号:",prop:"idCard"},{default:t(()=>[e(U,{modelValue:a.value.idCard,"onUpdate:modelValue":l[5]||(l[5]=p=>a.value.idCard=p),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1}),e(V,{label:"政治面貌:",prop:"politics"},{default:t(()=>[e(ke,{modelValue:a.value.politics,"onUpdate:modelValue":l[6]||(l[6]=p=>a.value.politics=p)},null,8,["modelValue"])]),_:1}),e(V,{label:"社保卡号:",prop:"socialCard"},{default:t(()=>[e(U,{modelValue:a.value.socialCard,"onUpdate:modelValue":l[7]||(l[7]=p=>a.value.socialCard=p),placeholder:"请输入社保卡号"},null,8,["modelValue"])]),_:1}),e(V,{label:"婚姻状况:",prop:"marriage"},{default:t(()=>[e(k,{modelValue:a.value.marriage,"onUpdate:modelValue":l[8]||(l[8]=p=>a.value.marriage=p)},{default:t(()=>[e(C,{value:"已婚",size:"large"},{default:t(()=>[...l[16]||(l[16]=[_("已婚",-1)])]),_:1}),e(C,{value:"离婚",size:"large"},{default:t(()=>[...l[17]||(l[17]=[_("离婚",-1)])]),_:1}),e(C,{value:"丧偶",size:"large"},{default:t(()=>[...l[18]||(l[18]=[_("丧偶",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"受教育程度:",prop:"eduLevel"},{default:t(()=>[e(k,{modelValue:a.value.eduLevel,"onUpdate:modelValue":l[9]||(l[9]=p=>a.value.eduLevel=p)},{default:t(()=>[e(C,{value:"文盲",size:"large"},{default:t(()=>[...l[19]||(l[19]=[_("文盲",-1)])]),_:1}),e(C,{value:"略识文字",size:"large"},{default:t(()=>[...l[20]||(l[20]=[_("略识文字",-1)])]),_:1}),e(C,{value:"能读写",size:"large"},{default:t(()=>[...l[21]||(l[21]=[_("能读写",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(V,{label:"最高学历:",prop:"education"},{default:t(()=>[e(Ie,{modelValue:a.value.education,"onUpdate:modelValue":l[10]||(l[10]=p=>a.value.education=p)},null,8,["modelValue"])]),_:1}),e(V,{label:"户口所在地:",prop:"resident"},{default:t(()=>[e(U,{modelValue:a.value.resident,"onUpdate:modelValue":l[11]||(l[11]=p=>a.value.resident=p),placeholder:"区/路(存)/弄/号/室"},null,8,["modelValue"])]),_:1}),e(V,{label:"现居住地址:",prop:"address"},{default:t(()=>[e(U,{modelValue:a.value.address,"onUpdate:modelValue":l[12]||(l[12]=p=>a.value.address=p),placeholder:"区/路(存)/弄/号/室"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),e(De,{class:"login",modelValue:a.value.photo,"onUpdate:modelValue":l[13]||(l[13]=p=>a.value.photo=p),baseUrl:x(i),uploadUrl:s},null,8,["modelValue","baseUrl"])])}}}),ze=M(Ne,[["__scopeId","data-v-8d0e46fb"]]),Te={class:"Nowiln"},Le={class:"title"},Be=E({__name:"Nowillness",props:ae({title:{type:String,default:""}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(b){const f=q(b,"modelValue"),a=I([]),c=I([]);(async()=>{try{const s=await pe();c.value=s.data.list||[]}catch(s){console.error("获取疾病列表失败：",s),c.value=[]}})(),te(()=>{f.value&&f.value.trim()!==""?a.value=f.value.split(",").filter(Boolean):a.value=[]});const i=s=>{f.value=s.length>0?s.join(","):""};return(s,d)=>{const u=n("el-checkbox"),o=n("el-checkbox-group");return g(),$("div",null,[w("div",Te,[d[1]||(d[1]=w("div",{class:"left"},null,-1)),w("div",Le,B(b.title),1)]),e(o,{onChange:i,modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=l=>a.value=l)},{default:t(()=>[(g(!0),$(z,null,T(c.value,l=>(g(),S(u,{key:l.id,label:l.name,value:l.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])}}}),j=M(Be,[["__scopeId","data-v-e2bc08a9"]]),Fe=E({__name:"SelfCares",props:{modelValue:{default:[]},modelModifiers:{}},emits:["update:modelValue"],setup(b){const f=q(b,"modelValue"),a=I([]);(async()=>{const i=await ve();a.value=i.data.list})();const r=()=>{console.log("list",a),f.value=a.value.filter(i=>i.val).map(i=>({name:i.name,val:i.val}))};return(i,s)=>{const d=n("el-table-column"),u=n("el-radio"),o=n("el-radio-group"),l=n("el-table");return g(),$("div",null,[s[3]||(s[3]=w("div",{class:"Nowiln"},[w("div",{class:"left"}),w("div",{class:"title"},"老人自理情况")],-1)),e(l,{border:"",data:a.value,style:{width:"100%"}},{default:t(()=>[e(d,{prop:"id",label:"序号"}),e(d,{prop:"name",label:"维度"}),e(d,{prop:"address",label:"操作"},{default:t(U=>[e(o,{onChange:r,modelValue:U.row.val,"onUpdate:modelValue":V=>U.row.val=V},{default:t(()=>[e(u,{value:"正常",size:"large"},{default:t(()=>[...s[0]||(s[0]=[_("正常",-1)])]),_:1}),e(u,{value:"轻度依赖",size:"large"},{default:t(()=>[...s[1]||(s[1]=[_("轻度依赖",-1)])]),_:1}),e(u,{value:"重度依赖",size:"large"},{default:t(()=>[...s[2]||(s[2]=[_("重度依赖",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])}}}),Re=M(Fe,[["__scopeId","data-v-21800c81"]]),Ae={key:0},Pe={key:1},Ye=E({__name:"Checkups",props:{modelValue:{default:()=>[]},modelModifiers:{}},emits:["update:modelValue"],setup(b){const f=q(b,"modelValue"),a="http://123.57.237.81:8080/caresystem-server/api",c="http://123.57.237.81:8080/caresystem-server/api",r=a+"/upload/add",i=I([]),s=async()=>{try{const o=await ce();i.value=o.data.list.map(l=>({...l,picture:l.picture||""})),console.log("体检项目",o),u()}catch(o){console.error("获取体检项目列表失败：",o)}},d=(o,l)=>{console.log("当前行上传结果：",o,l),l.picture=o,u()},u=()=>{const o=i.value.map(l=>({name:l.name,val:l.picture,id:l.id||""}));f.value=o,console.log("整理后的 values 数据：",f.value)};return H(i,()=>{u()},{deep:!0}),s(),(o,l)=>{const U=n("el-table-column"),V=n("el-button"),C=n("el-table");return g(),$("div",null,[l[1]||(l[1]=w("div",{class:"Nowiln"},[w("div",{class:"left"}),w("div",{class:"title"},"体检报告")],-1)),e(C,{border:"",data:i.value,style:{width:"100%"},"row-key":"id"},{default:t(()=>[e(U,{prop:"name",label:"体检项目"}),e(U,{prop:"picture",label:"资料"},{default:t(k=>[k.row.picture?(g(),$("span",Ae,B(k.row.picture),1)):(g(),$("span",Pe,"未上传"))]),_:1}),e(U,{label:"操作"},{default:t(k=>[e(ge,{onChange:m=>d(m,k.row),modelValue:k.row.picture,"onUpdate:modelValue":m=>k.row.picture=m,baseUrl:x(c),uploadUrl:r,isText:!0},{"upload-text":t(()=>[e(V,{type:"primary"},{default:t(()=>[...l[0]||(l[0]=[_("上传图片",-1)])]),_:1})]),_:1},8,["onChange","modelValue","onUpdate:modelValue","baseUrl"])]),_:1})]),_:1},8,["data"])])}}}),je=M(Ye,[["__scopeId","data-v-7eeae570"]]),He={class:"dialog-footer"},Ge=E({__name:"Family",setup(b,{expose:f}){const a=I(de("familyData")||[]),c=I(!1),r=I(!1),i=I(!1),s=I(),d={id:0,elderlyId:0,name:"",mobile:"",idCard:"",relation:"",gender:1,address:""},u=I({...d}),o=F({name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}],relation:[{required:!0,message:"请选择老人关系",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],address:[{required:!0,message:"请输入联系地址",trigger:"blur"}]}),l=()=>{i.value=!1,r.value=!0,u.value={...d},P(()=>{s.value?.clearValidate()})},U=m=>{i.value=!0,r.value=!0,u.value={...m},P(()=>{s.value?.clearValidate()})},V=async()=>{if(s.value)try{if(await s.value.validate(),c.value=!0,i.value){const m=a.value.findIndex(v=>v.id===u.value.id);m>-1&&(a.value[m]={...u.value},h.success("修改家属信息成功"))}else{const m=a.value.length>0?Math.max(...a.value.map(p=>p.id))+1:1,v={...u.value,id:m};a.value.push(v),h.success("新增家属成功")}r.value=!1,u.value={...d}}catch(m){console.error("表单校验失败：",m)}finally{c.value=!1}},C=()=>{r.value=!1,u.value={...d},s.value?.clearValidate()},k=m=>{re.confirm("确定要删除该家属信息吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.value=a.value.filter(v=>v.id!==m),h.success("删除成功")}).catch(()=>{h.info("已取消删除")})};return f({data:a}),(m,v)=>{const p=n("el-button"),D=n("el-table-column"),G=n("el-table"),L=n("el-input"),N=n("el-form-item"),R=n("el-radio"),O=n("el-radio-group"),W=n("el-form"),Q=n("el-dialog"),X=ue("loading");return g(),$("div",null,[e(p,{style:{"margin-bottom":"10px"},type:"primary",onClick:l},{default:t(()=>[...v[7]||(v[7]=[_("新增家属",-1)])]),_:1}),oe((g(),S(G,{border:"",data:a.value,style:{width:"100%"}},{default:t(()=>[e(D,{prop:"id",label:"序号"}),e(D,{prop:"name",label:"姓名"}),e(D,{label:"性别"},{default:t(y=>[_(B(y.row.gender===1?"男":"女"),1)]),_:1}),e(D,{prop:"idCard",label:"身份证号"}),e(D,{prop:"mobile",label:"联系电话"}),e(D,{prop:"address",label:"联系地址"}),e(D,{prop:"relation",label:"与老人的关系"}),e(D,{fixed:"right",label:"操作"},{default:t(y=>[e(p,{link:"",type:"primary",onClick:J=>U(y.row)},{default:t(()=>[...v[8]||(v[8]=[_(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(p,{link:"",type:"primary",onClick:J=>k(y.row.id)},{default:t(()=>[...v[9]||(v[9]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[X,c.value]]),e(Q,{modelValue:r.value,"onUpdate:modelValue":v[6]||(v[6]=y=>r.value=y),title:i.value?"修改家属":"新增家属",width:"500"},{footer:t(()=>[w("div",He,[e(p,{onClick:C},{default:t(()=>[...v[12]||(v[12]=[_("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:V},{default:t(()=>[_(B(i.value?"确认修改":"确认新增"),1)]),_:1})])]),default:t(()=>[e(W,{ref_key:"ruleFormRef",ref:s,style:{"max-width":"600px"},model:u.value,rules:o,"label-width":"auto"},{default:t(()=>[e(N,{label:"姓名:",prop:"name"},{default:t(()=>[e(L,{modelValue:u.value.name,"onUpdate:modelValue":v[0]||(v[0]=y=>u.value.name=y),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),e(N,{label:"联系电话:",prop:"mobile"},{default:t(()=>[e(L,{modelValue:u.value.mobile,"onUpdate:modelValue":v[1]||(v[1]=y=>u.value.mobile=y),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(N,{label:"身份证号:",prop:"idCard"},{default:t(()=>[e(L,{modelValue:u.value.idCard,"onUpdate:modelValue":v[2]||(v[2]=y=>u.value.idCard=y),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1}),e(N,{label:"与老人关系:",prop:"relation"},{default:t(()=>[e(Ve,{modelValue:u.value.relation,"onUpdate:modelValue":v[3]||(v[3]=y=>u.value.relation=y)},null,8,["modelValue"])]),_:1}),e(N,{label:"性别:",prop:"gender"},{default:t(()=>[e(O,{modelValue:u.value.gender,"onUpdate:modelValue":v[4]||(v[4]=y=>u.value.gender=y)},{default:t(()=>[e(R,{value:1,size:"large"},{default:t(()=>[...v[10]||(v[10]=[_("男",-1)])]),_:1}),e(R,{value:2,size:"large"},{default:t(()=>[...v[11]||(v[11]=[_("女",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(N,{label:"联系地址:",prop:"address"},{default:t(()=>[e(L,{modelValue:u.value.address,"onUpdate:modelValue":v[5]||(v[5]=y=>u.value.address=y),placeholder:"请输入联系地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),Oe=M(Ge,[["__scopeId","data-v-9c467471"]]),We={class:"edit"},Qe={class:"round"},Xe=E({__name:"ElderlyEdit",setup(b){const f=I("first"),a=ne(),c=I(0);let r=F({name:"",mobile:"",photo:"",gender:0,birthday:"",nativePlace:"",nation:"",idCard:"",politics:"",socialCard:"",marriage:"",eduLevel:"",education:"",resident:"",address:"",health:{oldillness:"",nowillness:"",otherillness:"",otherCase:"",id:0,elderlyId:0},selfCares:[],checkups:[],family:[],id:0,companyId:0,begId:0,houseId:0,state:1,addTime:"",addAccountId:0,stateName:null,begName:null,addAccountName:null,houseName:null,buildingName:null}),i=I([]);me("familyData",i),se(async()=>{const u=a.query.id||a.params.id;u&&!isNaN(Number(u))?(c.value=Number(u),await s()):(c.value=0,h.success("进入新增老人模式，请填写相关信息"))});const s=async()=>{try{const u=await fe(c.value);if(u&&u.code===1e4){const o=u.data;Object.assign(r,o),o.family&&Array.isArray(o.family)&&(i.value=[...o.family]),r.checkups=r.checkups.map(l=>({...l,picture:l.picture||""})),h.success("数据加载完成，可进行编辑")}else h.error("获取老人详情失败："+(u?.msg||"接口返回异常"))}catch(u){console.error("获取老人详情出错：",u),h.error("获取老人详情失败，请稍后重试")}},d=async()=>{const u={...r,checkups:r.checkups.map(o=>({...o,picture:o.picture||""}))};try{let o;c.value?(o=await be(c.value,u),h.success("老人信息编辑成功")):(o=await _e(u),h.success("新增老人成功")),console.log(c.value?"老人编辑":"老人添加",o),Y.push("/elderly")}catch(o){console.error(c.value?"老人编辑出错":"老人添加出错",o),h.error(c.value?"编辑老人失败，请稍后重试":"新增老人失败，请稍后重试")}};return H(i,u=>{u&&Array.isArray(u)&&(r.family=[...u])},{deep:!0}),(u,o)=>{const l=n("el-tab-pane"),U=n("el-input"),V=n("el-tabs"),C=n("el-button"),k=n("el-card");return g(),S(k,{class:"elderly-edit-card"},{default:t(()=>[e(V,{modelValue:f.value,"onUpdate:modelValue":o[7]||(o[7]=m=>f.value=m),type:"card",class:"demo-tabs"},{default:t(()=>[e(l,{label:"基本信息",name:"first"},{default:t(()=>[e(ze,{modelValue:x(r),"onUpdate:modelValue":o[0]||(o[0]=m=>ie(r)?r.value=m:r=m)},null,8,["modelValue"])]),_:1}),e(l,{label:"健康信息",name:"second"},{default:t(()=>[e(j,{title:"现病史",modelValue:x(r).health.nowillness,"onUpdate:modelValue":o[1]||(o[1]=m=>x(r).health.nowillness=m)},null,8,["modelValue"]),e(j,{title:"既往病史",modelValue:x(r).health.oldillness,"onUpdate:modelValue":o[2]||(o[2]=m=>x(r).health.oldillness=m)},null,8,["modelValue"]),w("div",null,[o[9]||(o[9]=w("div",{class:"text"},"其他疾病",-1)),e(U,{modelValue:x(r).health.otherillness,"onUpdate:modelValue":o[3]||(o[3]=m=>x(r).health.otherillness=m),rows:2,type:"textarea",placeholder:"如有其它疾病，请输入"},null,8,["modelValue"])]),e(Re,{modelValue:x(r).selfCares,"onUpdate:modelValue":o[4]||(o[4]=m=>x(r).selfCares=m)},null,8,["modelValue"]),w("div",We,[o[10]||(o[10]=w("div",{class:"text"},"其他特殊情况说明",-1)),e(U,{modelValue:x(r).health.otherCase,"onUpdate:modelValue":o[5]||(o[5]=m=>x(r).health.otherCase=m),rows:2,type:"textarea",placeholder:"如有其他特殊情况，请输入"},null,8,["modelValue"])]),e(je,{modelValue:x(r).checkups,"onUpdate:modelValue":o[6]||(o[6]=m=>x(r).checkups=m)},null,8,["modelValue"])]),_:1}),e(l,{label:"家属信息",name:"third"},{default:t(()=>[e(Oe)]),_:1})]),_:1},8,["modelValue"]),w("div",Qe,[e(C,{onClick:o[8]||(o[8]=m=>x(Y).push("/elderly"))},{default:t(()=>[...o[11]||(o[11]=[_("取消",-1)])]),_:1}),e(C,{type:"primary",onClick:d},{default:t(()=>[...o[12]||(o[12]=[_("保存",-1)])]),_:1})])]),_:1})}}}),ll=M(Xe,[["__scopeId","data-v-a845e7e1"]]);export{ll as default};
