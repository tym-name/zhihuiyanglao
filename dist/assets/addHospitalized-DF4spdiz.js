import{d as x,c as p,f as t,a1 as C,a as _,_ as I,r as g,k as h,j as F,l as S,e as s,g as R,t as w,b as m,w as c,u as M,ab as j,F as z,v as H,a6 as G,ac as P,ad as O,o as Y,z as W,B as A,E as q}from"./index-DSXWNbz6.js";import{_ as J}from"./CascaderBeg.vue_vue_type_script_setup_true_lang-_gtH4QnK.js";import"./building-CNUBr-fR.js";import"./convertToTree-Coeds9PE.js";import"./house-0UauvkXi.js";const K={class:"simple-step-bar"},Q={class:"step-item"},X={class:"step-item"},Z=x({__name:"step",props:{currentStep:{type:Number,default:0}},setup(i){return console.log(i),(r,d)=>(_(),p("div",K,[t("div",Q,[t("div",{class:C(["step-number",{active:i.currentStep>=0}])},"1",2),t("div",{class:C(["step-text",{active:i.currentStep>=0}])},"选择服务",2)]),d[0]||(d[0]=t("div",{class:"step-line"},null,-1)),t("div",X,[t("div",{class:C(["step-number",{active:i.currentStep>=1}])},"2",2),t("div",{class:C(["step-text",{active:i.currentStep>=1}])},"订单确定",2)])]))}}),ee=I(Z,[["__scopeId","data-v-f8701cb9"]]),te={class:"bed-select-container"},se={class:"header"},le={class:"total-fee"},oe={class:"fee-amount"},ae=x({__name:"bed",emits:["update:modelValue"],setup(i,{emit:o}){const r=o,d=g(),e=h({begId:0,price:null,days:null,checkInDate:""});let n=l=>{e.begId=l[l.length-1]};const v=h({begId:[{required:!0,message:"请选择床位",trigger:"blur"}],price:[{required:!0,message:"请选择床位单价",trigger:"blur"}],days:[{required:!0,message:"请输入入住天数",trigger:"blur"}],checkInDate:[{required:!0,message:"请选择入住日期",trigger:"blur"}]}),u=F(()=>!e.price||!e.days?0:e.price*e.days);return S(e,l=>{r("update:modelValue",{...l,totalFee:u.value})},{deep:!0}),(l,a)=>{const b=m("el-form-item"),y=m("el-input-number"),$=m("el-date-picker"),D=m("el-form");return _(),p("div",te,[t("div",se,[a[4]||(a[4]=t("div",{class:"title"},[t("span",{class:"indicator"}),R(" 选择床位 ")],-1)),t("div",le,[a[3]||(a[3]=R(" 床位费合计：",-1)),t("span",oe,w(u.value.toFixed(2)),1)])]),s(D,{ref_key:"formRef",ref:d,model:e,rules:v,"label-width":"120px",style:{width:"400px"}},{default:c(()=>[s(b,{label:"选择床位",prop:"begId"},{default:c(()=>[s(J,{onBedChange:M(n)},null,8,["onBedChange"])]),_:1}),s(b,{label:"床位单价",prop:"price",style:{width:"300px"}},{default:c(()=>[s(y,{modelValue:e.price,"onUpdate:modelValue":a[0]||(a[0]=V=>e.price=V),placeholder:"200/天",min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),s(b,{label:"入住天数",prop:"days",style:{width:"300px"}},{default:c(()=>[s(y,{modelValue:e.days,"onUpdate:modelValue":a[1]||(a[1]=V=>e.days=V),placeholder:"请输入",min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),s(b,{label:"入住日期",prop:"checkInDate"},{default:c(()=>[s($,{modelValue:e.checkInDate,"onUpdate:modelValue":a[2]||(a[2]=V=>e.checkInDate=V),type:"date",placeholder:"请选择",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])}}}),re=I(ae,[["__scopeId","data-v-044d0bac"]]),ne={class:"diet-price-container"},ie={class:"header"},de={class:"total-fee"},ue={class:"fee-amount"},ce=x({__name:"food",props:{modelValue:{type:Number},days:{type:Number,default:0}},emits:["update:modelValue"],setup(i,{emit:o}){const r=i,d=o,e=h({price:r.modelValue||1}),n=h({price:[{required:!0,message:"请输入套餐单价",trigger:"blur"},{type:"number",min:1,message:"套餐单价必须大于0",trigger:"blur"},{validator:(u,l,a)=>{l&&!/^\d+$/.test(l.toString())?a(new Error("套餐单价必须是整数")):a()},trigger:"blur"}]}),v=F(()=>!e.price||!r.days?0:e.price*r.days);return S(()=>e.price,u=>{d("update:modelValue",u)}),S(()=>r.modelValue,u=>{e.price=u||1}),(u,l)=>{const a=m("el-input-number"),b=m("el-form-item"),y=m("el-form");return _(),p("div",ne,[t("div",ie,[l[2]||(l[2]=t("div",{class:"title"},[t("span",{class:"indicator"}),R(" 餐饮膳食 ")],-1)),t("div",de,[l[1]||(l[1]=R(" 伙食费合计：",-1)),t("span",ue,w(v.value.toFixed(2)),1)])]),s(y,{ref:"formRef",model:e,rules:n,"label-width":"120px"},{default:c(()=>[s(b,{label:"套餐单价",prop:"price"},{default:c(()=>[s(a,{modelValue:e.price,"onUpdate:modelValue":l[0]||(l[0]=$=>e.price=$),min:0,max:100,step:1,style:{width:"200px"},precision:0,placeholder:"25/天"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])}}}),me=I(ce,[["__scopeId","data-v-3ce223c9"]]),pe={class:"care-price-container"},_e={class:"header"},fe={class:"total-fee"},ve={class:"fee-amount"},ge=x({__name:"nurse",props:{modelValue:{type:Number},days:{type:Number,default:0}},emits:["update:modelValue"],setup(i,{emit:o}){const r=i,d=o,e=h({price:r.modelValue||1}),n=h({price:[{required:!0,message:"请输入护理费",trigger:"blur"},{type:"number",min:1,message:"护理费必须大于0",trigger:"blur"},{validator:(u,l,a)=>{l&&!/^\d+$/.test(l.toString())?a(new Error("护理费必须是整数")):a()},trigger:"blur"}]}),v=F(()=>!e.price||!r.days?0:e.price*r.days);return S(()=>e.price,u=>{d("update:modelValue",u)}),S(()=>r.modelValue,u=>{e.price=u||1}),(u,l)=>{const a=m("el-input-number"),b=m("el-form-item"),y=m("el-form");return _(),p("div",pe,[t("div",_e,[l[2]||(l[2]=t("div",{class:"title"},[t("span",{class:"indicator"}),R(" 护理服务 ")],-1)),t("div",fe,[l[1]||(l[1]=R(" 护理费合计：",-1)),t("span",ve,w(v.value.toFixed(2)),1)])]),s(y,{ref:"formRef",model:e,rules:n,"label-width":"120px"},{default:c(()=>[s(b,{label:"护理费",prop:"price"},{default:c(()=>[s(a,{modelValue:e.price,"onUpdate:modelValue":l[0]||(l[0]=$=>e.price=$),min:0,max:500,step:1,style:{width:"200px"},precision:0,placeholder:"100/天"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])}}}),be=I(ge,[["__scopeId","data-v-6db66740"]]),ye={class:"service-manager"},he={class:"service-header"},$e={class:"service-table"},Ve={class:"table-body"},we={class:"row-item"},Re={class:"row-item"},xe={class:"row-item"},Ie={key:1,class:"empty-data"},ke=x({__name:"serve",setup(i){const o=g([]),r=()=>{console.log("添加服务")};return(d,e)=>(_(),p("div",ye,[t("div",he,[s(M(j),{type:"primary",onClick:r},{default:c(()=>[...e[0]||(e[0]=[R("添加服务",-1)])]),_:1})]),t("div",$e,[e[1]||(e[1]=t("div",{class:"table-header"},[t("div",{class:"header-item"},"服务名称"),t("div",{class:"header-item"},"服务描述"),t("div",{class:"header-item"},"合计")],-1)),t("div",Ve,[o.value.length>0?(_(!0),p(z,{key:0},H(o.value,(n,v)=>(_(),p("div",{key:v,class:"table-row"},[t("div",we,w(n.name),1),t("div",Re,w(n.description),1),t("div",xe,w(n.total),1)]))),128)):(_(),p("div",Ie,"暂无数据"))])])]))}}),De=I(ke,[["__scopeId","data-v-59be5577"]]),qe={class:"other-charges"},Ee=x({__name:"elses",setup(i){const o=h({deposit:null,livingExpense:null}),r=h({deposit:[{required:!0,message:"请输入押金",trigger:"blur"},{type:"number",min:0,message:"押金不能为负数",trigger:"blur"},{validator:(d,e,n)=>{e&&!/^\d+$/.test(e.toString())?n(new Error("押金必须是整数")):n()},trigger:"blur"}],livingExpense:[{required:!0,message:"请输入一次性生活费",trigger:"blur"},{type:"number",min:0,message:"一次性生活费不能为负数",trigger:"blur"},{validator:(d,e,n)=>{e&&!/^\d+$/.test(e.toString())?n(new Error("一次性生活费必须是整数")):n()},trigger:"blur"}]});return(d,e)=>{const n=m("el-input-number"),v=m("el-form-item"),u=m("el-form");return _(),p("div",qe,[e[2]||(e[2]=t("h3",{class:"section-title"},[t("span",{class:"title-icon"}),R(" 其他收费 ")],-1)),s(u,{ref:"formRef",model:o,rules:r,"label-width":"120px"},{default:c(()=>[s(v,{label:"押金",prop:"deposit"},{default:c(()=>[s(n,{modelValue:o.deposit,"onUpdate:modelValue":e[0]||(e[0]=l=>o.deposit=l),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),s(v,{label:"一次性生活费",prop:"livingExpense"},{default:c(()=>[s(n,{modelValue:o.livingExpense,"onUpdate:modelValue":e[1]||(e[1]=l=>o.livingExpense=l),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])}}}),Me=I(Ee,[["__scopeId","data-v-8cdf37e6"]]),Se={class:"kernel-setting"},Ce=x({__name:"kernel",setup(i){const o=h({cycle:null}),r=h({cycle:[{required:!0,message:"请输入入院费用核定周期",trigger:"blur"},{type:"number",min:1,message:"入院费用核定周期必须大于0",trigger:"blur"},{validator:(d,e,n)=>{e&&!/^\d+$/.test(e.toString())?n(new Error("入院费用核定周期必须是整数")):n()},trigger:"blur"}]});return(d,e)=>{const n=m("el-input-number"),v=m("el-form-item"),u=m("el-form");return _(),p("div",Se,[e[1]||(e[1]=t("h3",{class:"section-title"},[t("span",{class:"title-icon"}),R(" 入院费用核定周期设置 ")],-1)),s(u,{ref:"formRef",model:o,rules:r,"label-width":"150px"},{default:c(()=>[s(v,{label:"入院费用核定周期",prop:"cycle"},{default:c(()=>[s(n,{modelValue:o.cycle,"onUpdate:modelValue":e[0]||(e[0]=l=>o.cycle=l),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])}}}),Ue=I(Ce,[["__scopeId","data-v-bb357b3d"]]),Fe={class:"relation-info"},Ne={class:"relation-body"},Be={class:"row-item"},Ye={class:"row-item"},ze={class:"row-item"},He={key:1,class:"empty-data"},Le=x({__name:"relation",setup(i){const o=g([]);return(r,d)=>(_(),p("div",Fe,[d[0]||(d[0]=G('<div class="relation-header" data-v-94d23e98><h3 class="section-title" data-v-94d23e98>家属信息：</h3><div class="header-items" data-v-94d23e98><div class="header-item" data-v-94d23e98>家属姓名</div><div class="header-item" data-v-94d23e98>与老人关系</div><div class="header-item" data-v-94d23e98>联系方式</div></div></div>',1)),t("div",Ne,[o.value.length>0?(_(!0),p(z,{key:0},H(o.value,(e,n)=>(_(),p("div",{key:n,class:"relation-row"},[t("div",Be,w(e.name),1),t("div",Ye,w(e.relation),1),t("div",ze,w(e.contact),1)]))),128)):(_(),p("div",He,"暂无数据"))])]))}}),Te=I(Le,[["__scopeId","data-v-94d23e98"]]),je={class:"old-man-info"},Ge={class:"info-container"},Pe={class:"avatar-section"},Oe=["src"],We={key:1,class:"avatar-placeholder"},Ae={class:"info-section"},Je={class:"info-item"},Ke={class:"value"},Qe={class:"info-item"},Xe={class:"value"},Ze=x({__name:"oldMan",props:{oldManData:{type:Object,default:()=>({name:"",idCard:"",photo:""})}},setup(i){const o="http://123.57.237.81:8080/caresystem/";return console.log(i),(d,e)=>(_(),p("div",je,[t("div",Ge,[t("div",Pe,[i.oldManData.photo?(_(),p("img",{key:0,src:M(o)+i.oldManData.photo,alt:"老人头像",class:"avatar-img"},null,8,Oe)):(_(),p("div",We,[s(M(P),null,{default:c(()=>[s(M(O))]),_:1})]))]),t("div",Ae,[t("div",Je,[e[0]||(e[0]=t("span",{class:"label"},"老人姓名：",-1)),t("span",Ke,w(i.oldManData.name||"未知"),1)]),t("div",Qe,[e[1]||(e[1]=t("span",{class:"label"},"身份证号：",-1)),t("span",Xe,w(i.oldManData.idCard||"未知"),1)])])])]))}}),et=I(Ze,[["__scopeId","data-v-ac53096d"]]),tt={class:"reservation-page"},st={style:{display:"flex",gap:"300px"}},lt=["src"],ot=x({__name:"addHospitalized",setup(i){const o=W(),r=g({name:"",idCard:"",photo:""});Y(()=>{if(console.log("路由参数111：",o.query),o.query){r.value.name=o.query.name||"",r.value.idCard=o.query.idCard||"";const f=o.query.photo||"";f?f.startsWith("http")?r.value.photo=f:r.value.photo=d+f:r.value.photo=""}});const d="http://123.57.237.81:8080/caresystem/",e=g(!1),n=g(""),v=()=>{A.push({path:"/Hospitalized"})},u=async()=>{if(!b.value){q.error("表单初始化失败，请刷新页面重试");return}try{await b.value.validate(),y.value&&y.value.formRef&&y.value.formRef.validate&&await y.value.formRef.validate(),V.value&&V.value.formRef&&V.value.formRef.validate&&await V.value.formRef.validate(),E.value&&E.value.formRef&&E.value.formRef.validate&&await E.value.formRef.validate(),$.value&&$.value.formRef&&$.value.formRef.validate&&await $.value.formRef.validate(),D.value&&D.value.formRef&&D.value.formRef.validate&&await D.value.formRef.validate();let f=!0;a.mobile&&!/^1[3-9]\d{9}$/.test(a.mobile)&&(q.warning("请输入正确的11位手机号"),f=!1),a.day&&a.day<1&&(q.warning("预定时长不能小于1天"),f=!1),a.amount&&a.amount<0&&(q.warning("定金金额不能为负数"),f=!1),f&&(q.success("表单验证通过，正在进入下一步..."),N.value=1)}catch(f){console.error("表单验证失败:",f),q.warning("请检查表单填写是否完整，确保所有必填项都已正确填写")}};console.log("路由信息：",o);const l=h({name:[{required:!0,message:"请输入预定人姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入预定人电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的11位手机号",trigger:"blur"}],relation:[{required:!0,message:"请选择与老人关系",trigger:"change"}],bed:[{required:!0,message:"请选择床位",trigger:"change"}],startDate:[{required:!0,message:"请选择开始日期",trigger:"change"}],day:[{required:!0,message:"请输入预定时长",trigger:"blur"}],amount:[{required:!0,message:"请输入定金金额",trigger:"blur"}]}),a=h({begId:0,name:"",mobile:"",relation:"",bed:"",startDate:"",day:null,amount:null,dietPrice:25,services:[],files:[],elderlyId:""});Y(()=>{const f=o.query.id;console.log(111,f),a.elderlyId=f});const b=g(),y=g(),$=g(),D=g(),V=g(),E=g(),N=g(0);return(f,k)=>{const B=m("el-button"),L=m("el-form"),T=m("el-dialog");return _(),p("div",tt,[s(L,{ref_key:"formRef",ref:b,model:a,rules:l,"label-width":"150px",class:"reservation-form"},{default:c(()=>[s(ee,{currentStep:N.value},null,8,["currentStep"]),t("div",st,[s(et,{oldManData:r.value},null,8,["oldManData"]),s(Te,{ref:"relationRef"},null,512)]),s(re,{ref_key:"bedRef",ref:y},null,512),s(me,{ref_key:"foodRef",ref:$},null,512),s(be,{ref_key:"nurseRef",ref:D},null,512),s(De,{ref:"serveRef",modelValue:a.services,"onUpdate:modelValue":k[0]||(k[0]=U=>a.services=U)},null,8,["modelValue"]),s(Me,{ref_key:"elsesRef",ref:V},null,512),s(Ue,{ref_key:"kernelRef",ref:E},null,512),t("div",null,[s(B,{onClick:v},{default:c(()=>[...k[2]||(k[2]=[R("返回",-1)])]),_:1}),s(B,{type:"primary",onClick:u},{default:c(()=>[...k[3]||(k[3]=[R("下一步",-1)])]),_:1})])]),_:1},8,["model","rules"]),s(T,{modelValue:e.value,"onUpdate:modelValue":k[1]||(k[1]=U=>e.value=U),title:"协议图片预览",width:"80%","append-to-body":""},{default:c(()=>[t("img",{src:n.value,alt:"大图预览",class:"big-preview-img",style:{width:"100%"}},null,8,lt)]),_:1},8,["modelValue"])])}}}),ut=I(ot,[["__scopeId","data-v-b926ed82"]]);export{ut as default};
