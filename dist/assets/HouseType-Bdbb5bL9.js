import{T}from"./table-B1my3jl3.js";import{t as f,d as D,r as s,a as w,c as E,b as V,e as l,w as a,g as c,f as u,u as $,E as g,h as d,_ as A}from"./index-D6YPj1KB.js";const N=n=>f.get("/housetype/list",n),j=n=>f.delete(`/housetype/delete/${n}`),H=n=>f.post("/housetype/deleteAll",n),M=D({__name:"HouseType",setup(n){const r=s(!0),h=s(!1),p=s(null),y=s(void 0),v=()=>{y.value=void 0,h.value=!0},b=e=>{y.value=e,h.value=!0},_=e=>{g.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await j(e),d({type:"success",message:"删除成功"}),p.value?.refresh()}).catch(()=>{d({type:"info",message:"已取消删除"})})},x=e=>{console.log("选中的数据：",e),o.value=e,r.value=e.length===0},o=s([]),C=()=>{o.value.length!==0&&g.confirm(`是否删除选中的 ${o.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=o.value.map(t=>t.id);await H(e),d({type:"success",message:"批量删除成功"}),p.value?.getData(),r.value=!0}).catch(()=>{d({type:"info",message:"已取消删除"})})},k=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"姓名",prop:"name"},{label:"操作",slot:"operate",width:180,fixed:"right"}];return(e,t)=>{const i=w("el-button");return V(),E("div",null,[l(T,{ref_key:"tableRef",ref:p,onSelectionChange:x,columns:k,"fetch-data":$(N)},{buttons:a(()=>[l(i,{type:"success",onClick:v},{default:a(()=>[...t[0]||(t[0]=[c("i",{class:"iconfont icon-jia"},null,-1),u("新增护理服务",-1)])]),_:1}),l(i,{type:"danger",onClick:C,disabled:r.value},{default:a(()=>[...t[1]||(t[1]=[c("i",{class:"iconfont icon-shanchu"},null,-1),u("批量删除 ",-1)])]),_:1},8,["disabled"])]),operate:a(({row:m})=>[l(i,{link:"",type:"primary",onClick:B=>b(m)},{default:a(()=>[...t[2]||(t[2]=[c("i",{class:"iconfont icon-bianji"},null,-1),u("编辑",-1)])]),_:1},8,["onClick"]),l(i,{link:"",type:"danger",onClick:B=>_(m.id)},{default:a(()=>[...t[3]||(t[3]=[c("i",{class:"iconfont icon-shanchu"},null,-1),u("删除 ",-1)])]),_:1},8,["onClick"])]),_:1},8,["fetch-data"])])}}}),I=A(M,[["__scopeId","data-v-3686df60"]]);export{I as default};
