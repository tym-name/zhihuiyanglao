import{c as _,d as U,a as M,b as $}from"./company-Cx-MsYTh.js";import{T as z}from"./table-B1my3jl3.js";import{_ as F}from"./CompanyEdit.vue_vue_type_script_setup_true_lang-9061vtL5.js";import{d as R,o as j,r as s,a as c,c as G,b as H,e as a,w as l,f as r,g as C,u as I,E as h,h as d,_ as L}from"./index-D6YPj1KB.js";import"./Province-DU-Yrrtk.js";const q=R({__name:"Company",setup(J){j(()=>{console.log("机构列表",_)});const f=s(!1),i=s({name:"",adminName:"",page:1,pageSize:15}),u=s(null),v=s(!0),m=s(!1),y=s(),k=()=>{m.value=!1,y.value={},u.value?.refresh()},V=()=>{i.value={name:"",adminName:"",page:1,pageSize:15},u.value?.refresh()},x=()=>{u.value?.refresh()},B=()=>{f.value=!0,console.log("点击添加了"),m.value=!0},N=t=>{h.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{try{await U(t),d({type:"success",message:"删除成功"}),u.value?.refresh()}catch{d({type:"error",message:"删除失败"})}}).catch(()=>{d({type:"info",message:"已取消删除"})})},p=s([]),D=t=>{console.log("rows",t),p.value=t,v.value=t.length===0},T=()=>{p.value.length!==0&&h.confirm("是否删除选中的记录？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{try{await M(p.value.map(t=>t.id)),d({type:"success",message:"删除成功"}),u.value?.refresh(),p.value=[],v.value=!0}catch{d({type:"error",message:"删除失败"})}})},w=async t=>{try{f.value=!1;const e=await $(t);console.log("获取单条机构信息",e),y.value={...e.data},m.value=!0}catch{d({type:"error",message:"获取机构信息失败"})}},S=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"机构名称",prop:"name"},{label:"区域",prop:"address"},{label:"管理员姓名",prop:"adminName"},{label:"联系电话",prop:"telephone"},{label:"管理员账号",prop:"adminUserName"},{label:"操作",slot:"operate",width:180,fixed:"right"}];return(t,e)=>{const n=c("el-button"),b=c("el-input"),g=c("el-form-item"),A=c("el-form");return H(),G("div",null,[a(z,{ref_key:"tableRef",ref:u,onHandleSelectionChange:D,columns:S,"init-params":i.value,"fetch-data":I(_)},{buttons:l(()=>[a(n,{type:"success",onClick:B},{default:l(()=>[...e[3]||(e[3]=[C("i",{class:"iconfont icon-jia"},null,-1),r("添加",-1)])]),_:1}),a(n,{type:"danger",onClick:T,disabled:v.value},{default:l(()=>[...e[4]||(e[4]=[C("i",{class:"iconfont icon-shanchu"},null,-1),r("批量删除",-1)])]),_:1},8,["disabled"])]),search:l(()=>[a(A,{inline:!0,class:"demo-form-inline"},{default:l(()=>[a(g,{label:"机构名称:"},{default:l(()=>[a(b,{placeholder:"请输入机构名称",modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value.name=o),clearable:""},null,8,["modelValue"])]),_:1}),a(g,{label:"管理员姓名:"},{default:l(()=>[a(b,{placeholder:"请输入管理员姓名",modelValue:i.value.adminName,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value.adminName=o),clearable:""},null,8,["modelValue"])]),_:1}),a(g,null,{default:l(()=>[a(n,{type:"primary",onClick:x},{default:l(()=>[...e[5]||(e[5]=[r("查询",-1)])]),_:1}),a(n,{onClick:V},{default:l(()=>[...e[6]||(e[6]=[r("重置",-1)])]),_:1})]),_:1})]),_:1})]),operate:l(({row:o})=>[a(n,{link:"",type:"primary"},{default:l(()=>[...e[7]||(e[7]=[r("重置密码",-1)])]),_:1}),a(n,{link:"",type:"primary",onClick:E=>w(o.id)},{default:l(()=>[...e[8]||(e[8]=[r("修改",-1)])]),_:1},8,["onClick"]),a(n,{link:"",type:"danger",onClick:E=>N(o.id)},{default:l(()=>[...e[9]||(e[9]=[r("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"]),a(F,{"is-add":f.value,editData:y.value,handleSuccess:k,modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o)},null,8,["is-add","editData","modelValue"])])}}}),X=L(q,[["__scopeId","data-v-973867ac"]]);export{X as default};
