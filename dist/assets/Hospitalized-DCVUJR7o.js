import{T as N}from"./table-BDVlGf5e.js";import{D as h,d as z,r as m,c as E,e as t,n as H,p as R,w as l,u as S,F as U,b as f,f as c,g as n,t as v,h as F,E as b,a as _,_ as G}from"./index-DSXWNbz6.js";import{_ as $}from"./CascaderBeg.vue_vue_type_script_setup_true_lang-_gtH4QnK.js";import M from"./HospitalizedAdd-DDg4VAPu.js";import"./building-CNUBr-fR.js";import"./convertToTree-Coeds9PE.js";import"./house-0UauvkXi.js";import"./elderly-p1gfo6w8.js";const j=i=>h.get("/order/list",i),A=i=>h.delete(`/order/delete/${i}`),L=z({__name:"Hospitalized",setup(i){const d=m(null),y=m(!0),o=m({begId:"",name:"",elderlyIdCard:"",bed:""}),C=s=>{o.value.begId=s[s.length-1]||0,console.log("床位ID更新：",o.value.begId)},u=m(!1),V=()=>{d.value?.refresh()},k=()=>{d.value?.refresh()},x=()=>{o.value={name:"",elderlyIdCard:"",state:""},d.value?.refresh()},I=[{type:"selection",width:"50"},{label:"序号",prop:"id"},{label:"头像",image:"elderlyPhoto"},{label:"性别",slot:"elderlyGender"},{label:"老人姓名",prop:"elderlyName"},{label:"身份证号",prop:"elderlyIdCard"},{label:"床位",prop:"begName"},{label:"申请时间",prop:"addTime",width:130},{label:"入住开始时间",prop:"startDate",width:130},{label:"入住时长",prop:"payDays"},{label:"状态",prop:"state",slot:"state"},{label:"操作",slot:"operate",width:250}],B=()=>{u.value=!0},D=s=>{F.confirm("是否删除该条记录？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=await A(s);e.code===1e4?(b.success("删除成功"),d.value?.refresh()):b.error("删除失败："+e.msg)}).catch(()=>{b.info("已取消删除")})},w=s=>{console.log("选中的数据：",s),y.value=s.length===0};return(s,e)=>{const r=f("el-button"),g=f("el-input"),p=f("el-form-item"),T=f("el-form");return _(),E(U,null,[t(N,{ref_key:"tableRef",ref:d,onSelectionChange:w,"init-params":o.value,columns:I,"fetch-data":S(j)},{buttons:l(()=>[t(r,{type:"success",onClick:B},{default:l(()=>[...e[4]||(e[4]=[n("+ 新增",-1)])]),_:1}),t(r,{type:"danger",disabled:y.value},{default:l(()=>[...e[5]||(e[5]=[c("i",{class:"iconfont icon-shanchu"},null,-1),n("批量删除",-1)])]),_:1},8,["disabled"])]),elderlyGender:l(({row:a})=>[n(v(a.elderlyGender===1?"男":"女"),1)]),state:l(({row:a})=>[n(v(a.state===1?"已入院":"未入院"),1)]),search:l(()=>[t(T,{inline:!0,class:"demo-form-inline",style:{height:"80px"}},{default:l(()=>[t(p,{label:"老人姓名:"},{default:l(()=>[t(g,{placeholder:"请输入老人姓名",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a),clearable:""},null,8,["modelValue"])]),_:1}),t(p,{label:"身份证号:"},{default:l(()=>[t(g,{placeholder:"请输入身份证号",modelValue:o.value.elderlyIdCard,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.elderlyIdCard=a),clearable:""},null,8,["modelValue"])]),_:1}),t(p,{label:"床位:"},{default:l(()=>[t($,{onBedChange:C,modelValue:o.value.bed,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.bed=a)},null,8,["modelValue"])]),_:1}),t(p,{style:{width:"200px"}},{default:l(()=>[t(r,{type:"primary",onClick:k},{default:l(()=>[...e[6]||(e[6]=[n("查询",-1)])]),_:1}),t(r,{onClick:x},{default:l(()=>[...e[7]||(e[7]=[n("重置",-1)])]),_:1})]),_:1})]),_:1})]),operate:l(({row:a})=>[t(r,{link:"",type:"primary"},{default:l(()=>[...e[8]||(e[8]=[c("i",{class:"iconfont icon-file"},null,-1),n("详情",-1)])]),_:1}),t(r,{link:"",type:"primary"},{default:l(()=>[...e[9]||(e[9]=[c("i",{class:"iconfont icon-bianji"},null,-1),n("编辑",-1)])]),_:1}),t(r,{link:"",type:"danger",onClick:P=>D(a.id)},{default:l(()=>[...e[10]||(e[10]=[c("i",{class:"iconfont icon-shanchu"},null,-1),n("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"]),u.value?(_(),H(M,{key:0,modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=a=>u.value=a),onTableRefersh:V},null,8,["modelValue"])):R("",!0)],64)}}}),Z=G(L,[["__scopeId","data-v-2507db25"]]);export{Z as default};
