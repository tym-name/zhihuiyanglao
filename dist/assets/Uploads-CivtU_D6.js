import{d as y,j as V,c,e as n,a as i,G as b,w as r,B as v,p as m,n as B,u as T,M as U,h as d,b as u,_}from"./index-D6YPj1KB.js";const k={class:"upload-license"},w=["src"],M=y({__name:"Uploads",props:{modelValue:{},uploadUrl:{},uploadHeaders:{default:()=>({})},maxSize:{default:2},allowedTypes:{default:()=>["image/jpeg","image/jpg","image/png"]},tip:{},disabled:{type:Boolean,default:!1},baseUrl:{default:""},isText:{type:Boolean,default:!1}},emits:["update:modelValue","success","error"],setup(a,{emit:f}){const l=a,s=f,p=V(()=>l.modelValue?l.modelValue.startsWith("http")?l.modelValue:`${l.baseUrl}${l.modelValue}`:""),h=(e,t)=>{if(e?.code===1e4&&e.data?.url)s("update:modelValue",e.data.url),s("success",e,t);else{const o=e?.msg||"上传失败";d.error(o),s("error",o)}},g=e=>{if(!l.allowedTypes.includes(e.type)){const t=`上传文件只能是 ${l.allowedTypes.join(", ")} 格式!`;return d.error(t),s("error",t),!1}if(e.size/1024/1024>l.maxSize){const t=`上传文件大小不能超过 ${l.maxSize}MB!`;return d.error(t),s("error",t),!1}return!0};return(e,t)=>{const o=i("el-icon"),x=i("el-upload");return u(),c("div",k,[n(x,{class:"avatar-uploader",action:a.uploadUrl,headers:a.uploadHeaders,"show-file-list":!1,"on-success":h,"before-upload":g,disabled:a.disabled},b({default:r(()=>[a.modelValue&&!a.isText?(u(),c("img",{key:0,src:p.value,class:"avatar",style:{width:"65px",height:"65px"}},null,8,w)):m("",!0),!a.modelValue&&!a.isText?(u(),B(o,{key:1,class:"avatar-uploader-icon"},{default:r(()=>[n(T(U))]),_:1})):m("",!0)]),_:2},[a.isText?{name:"default",fn:r(()=>[v(e.$slots,"upload-text",{},void 0,!0)]),key:"0"}:void 0]),1032,["action","headers","disabled"])])}}}),$=_(M,[["__scopeId","data-v-54f287eb"]]);export{$ as u};
