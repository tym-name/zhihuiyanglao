import{T as E}from"./table-BDVlGf5e.js";import{s as N,a as U,b as z}from"./Supplier-Dk0aX1YN.js";import{_ as F}from"./SupplierEdit.vue_vue_type_script_setup_true_lang-DdseI1Pc.js";import I from"./SupplierUpdate-7XOuDx-y.js";import{d as M,r as a,b as $,c as j,a as m,e as i,n as g,p as b,w as s,f as u,g as d,u as A,h as L,E as y,T as R,_ as H}from"./index-DSXWNbz6.js";const q=M({__name:"Supplier",setup(G){const h=a({page:1,pageSize:15}),n=a(!1),p=a(!1),k=a(null),c=a(0);R("selectedSupplierId",c);const o=a(null),f=a(!0),x=()=>{n.value=!0},C=l=>{L.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{y({type:"success",message:"删除成功"}),await U(l),o.value?.refresh()}).catch(()=>{y({type:"info",message:"已取消删除"})})},_=l=>{p.value=!0,c.value=l.id},S=()=>{o.value?.getData()},V=()=>{n.value=!1,o.value?.refresh()},v=a([]),B=l=>{console.log("rows",l),v.value=l,f.value=l.length===0},D=async()=>{let l=v.value.map(e=>e.id);await z(l),o.value?.getData()},T=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"供应商名称",prop:"name"},{label:"供给食材数",prop:"foodCounts"},{label:"联系人",prop:"linkMan"},{label:"联系电话",prop:"mobile"},{label:"操作",slot:"operate",width:180,fixed:"right"}];return(l,e)=>{const r=$("el-button");return m(),j("div",null,[i(E,{ref_key:"tableRef",ref:o,onHandleSelectionChange:B,columns:T,"init-params":h.value,"fetch-data":A(N)},{buttons:s(()=>[i(r,{type:"success",onClick:x},{default:s(()=>[...e[2]||(e[2]=[u("i",{class:"iconfont icon-jia"},null,-1),d("添加",-1)])]),_:1}),i(r,{type:"danger",onClick:D,disabled:f.value},{default:s(()=>[...e[3]||(e[3]=[u("i",{style:{"margin-right":"5px"},class:"iconfont icon-shanchu"},null,-1),d("批量删除",-1)])]),_:1},8,["disabled"])]),operate:s(({row:t})=>[i(r,{link:"",type:"primary",onClick:w=>_(t)},{default:s(()=>[...e[4]||(e[4]=[u("span",{style:{"font-size":"14px","margin-right":"5px"},class:"iconfont icon-bianji"},null,-1),d("编辑",-1)])]),_:1},8,["onClick"]),i(r,{link:"",type:"danger",onClick:w=>C(t.id)},{default:s(()=>[...e[5]||(e[5]=[u("span",{style:{"font-size":"14px","margin-right":"5px"},class:"iconfont icon-shanchu"},null,-1),d("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"]),n.value?(m(),g(F,{key:0,handleSuccess:V,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t)},null,8,["modelValue"])):b("",!0),p.value?(m(),g(I,{key:1,refreshList:S,"supplier-id":c.value,upd:k.value,modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t)},null,8,["supplier-id","upd","modelValue"])):b("",!0)])}}}),W=H(q,[["__scopeId","data-v-88e352da"]]);export{W as default};
