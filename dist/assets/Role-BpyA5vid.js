import{r as k,a as B,b as T}from"./role-B3fOHZeG.js";import{T as D}from"./table-BDVlGf5e.js";import{d as w,r as s,c as $,e as n,w as a,u as f,b as E,f as i,g as c,B as m,h as g,E as r,a as N,_ as R}from"./index-DSXWNbz6.js";const z=w({__name:"Role",setup(A){const h=s({page:1,pageSize:10}),p=s(null),u=s(!0),b=t=>{g.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{r({type:"success",message:"删除成功"}),await B(t),p.value?.refresh()}).catch(()=>{r({type:"info",message:"已取消删除"})})},v=t=>{m.push(`/role-add?id=${t.id}`)},l=s([]),x=t=>{console.log("rows",t),l.value=t,u.value=t.length===0},y=()=>{l.value.length!==0&&g.confirm(`是否删除选中的 ${l.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const t=l.value.map(e=>e.id);await T(t),r({type:"success",message:"批量删除成功"}),p.value?.getData(),u.value=!0}).catch(()=>{r({type:"info",message:"已取消删除"})})},C=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"角色名称",prop:"name"},{label:"关联账号",prop:"accountCounts"},{label:"创建人",prop:"addAccountName"},{label:"创建时间",prop:"addTime"},{label:"操作",slot:"operate",width:180,fixed:"right"}];return(t,e)=>{const o=E("el-button");return N(),$("div",null,[n(D,{ref_key:"tableRef",ref:p,onSelectionChange:x,columns:C,"init-params":h.value,"fetch-data":f(k)},{buttons:a(()=>[n(o,{type:"success",onClick:e[0]||(e[0]=d=>f(m).push("/role-add"))},{default:a(()=>[...e[1]||(e[1]=[i("i",{class:"iconfont icon-jia"},null,-1),c("添加角色",-1)])]),_:1}),n(o,{type:"danger",onClick:y,disabled:u.value},{default:a(()=>[...e[2]||(e[2]=[i("i",{class:"iconfont icon-shanchu"},null,-1),c("批量删除",-1)])]),_:1},8,["disabled"])]),operate:a(({row:d})=>[n(o,{link:"",type:"primary",onClick:_=>v(d)},{default:a(()=>[...e[3]||(e[3]=[i("span",{style:{"font-size":"14px","margin-right":"5px"},class:"iconfont icon-bianji"},null,-1),c("修改",-1)])]),_:1},8,["onClick"]),n(o,{link:"",type:"danger",onClick:_=>b(d.id)},{default:a(()=>[...e[4]||(e[4]=[i("span",{style:{"font-size":"14px","margin-right":"5px"},class:"iconfont icon-shanchu"},null,-1),c("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"])])}}}),M=R(z,[["__scopeId","data-v-5382d1ef"]]);export{M as default};
