import{d as x,e as F}from"./Supplier-Dk0aX1YN.js";import{d as I,m as g,r as B,o as h,i as q,k as V,l as E,b as d,c as N,a as S,e as a,w as t,u as n,f as L,g as b,E as k,_ as R}from"./index-DSXWNbz6.js";const j={class:"dialog-footer"},G=I({__name:"SupplierUpdate",props:g({supplierId:{},refreshList:{type:Function}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:g(["update-success"],["update:modelValue"]),setup(c,{emit:O}){const u=B(),f=c;h(()=>{M(f.supplierId)});const r=q(c,"modelValue"),v=V({name:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],linkMan:[{required:!0,message:"请输入联系人",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]});let e=V({id:0,companyId:0,name:"",linkMan:"",mobile:"",foodCounts:1});const i=()=>{e.id=0,e.companyId=0,e.name="",e.linkMan="",e.mobile="",e.foodCounts=1,u.value?.clearValidate()},y=()=>{r.value=!1,i()},M=async o=>{let l=await x(o);console.log("根据id获取供应商",l),Object.assign(e,l.data)},w=async()=>{try{await u.value?.validate();const o=await F(e);console.log("修改供应商返回结果:",o),o&&o.code===1e4&&(k.success("供应商修改成功！"),r.value=!1,f.refreshList(),i())}catch(o){k.warning("请填写正确的表单信息！"),console.error("表单校验失败:",o)}};return E(r,o=>{o||i()}),(o,l)=>{const m=d("el-input"),p=d("el-form-item"),C=d("el-form"),_=d("el-button"),U=d("el-dialog");return S(),N("div",null,[a(U,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=s=>r.value=s),title:"编辑供应商",width:"500"},{footer:t(()=>[L("div",j,[a(_,{onClick:y},{default:t(()=>[...l[4]||(l[4]=[b("取消",-1)])]),_:1}),a(_,{type:"primary",onClick:w},{default:t(()=>[...l[5]||(l[5]=[b("确定",-1)])]),_:1})])]),default:t(()=>[a(C,{ref_key:"ruleFormRef",ref:u,style:{"max-width":"600px"},model:n(e),rules:v,"label-width":"auto"},{default:t(()=>[a(p,{label:"供应商名称",prop:"name"},{default:t(()=>[a(m,{modelValue:n(e).name,"onUpdate:modelValue":l[0]||(l[0]=s=>n(e).name=s),placeholder:"供应商名称"},null,8,["modelValue"])]),_:1}),a(p,{label:"联系人",prop:"linkMan"},{default:t(()=>[a(m,{modelValue:n(e).linkMan,"onUpdate:modelValue":l[1]||(l[1]=s=>n(e).linkMan=s),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1}),a(p,{label:"联系电话",prop:"mobile"},{default:t(()=>[a(m,{modelValue:n(e).mobile,"onUpdate:modelValue":l[2]||(l[2]=s=>n(e).mobile=s),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),z=R(G,[["__scopeId","data-v-98840faf"]]);export{z as default};
