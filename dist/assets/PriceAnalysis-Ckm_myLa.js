import{i as C}from"./index-BKAZWf-8.js";import{d as x,r as c,o as w,l as N,W as T,c as P,a as v,I as L,e as s,b as f,w as o,g as y,n as F,p as I,f as l,t as p,_ as S}from"./index-DSXWNbz6.js";import{_ as B,F as V}from"./priceupdate.vue_vue_type_script_setup_true_lang-DN_vq23e.js";const $=x({__name:"echarts",props:{xAxisData:{default:()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},seriesData:{default:()=>[150,230,224,218,135,147,260]},title:{default:""}},setup(_){const t=_,a=c(null);let e=null;const n=()=>{if(!a.value)return;e&&e.dispose(),e=C(a.value);const r={title:t.title?{text:t.title,left:"center"}:void 0,xAxis:{type:"category",data:t.xAxisData},yAxis:{type:"value"},series:[{data:t.seriesData,type:"line"}]};e.setOption(r,!0)},i=()=>{if(!e)return;const r={xAxis:{data:t.xAxisData},series:[{data:t.seriesData}]};e.setOption(r,!0)};return w(()=>{n(),window.addEventListener("resize",()=>{e&&e.resize()})}),N(()=>[t.xAxisData,t.seriesData],()=>{L(()=>{i()})},{deep:!0}),T(()=>{e&&(e.dispose(),e=null),window.removeEventListener("resize",()=>{})}),(r,m)=>(v(),P("div",{ref_key:"chartRef",ref:a,style:{width:"100%",height:"300px"}},null,512))}}),z=x({__name:"recordTable",props:{id:{}},setup(_){const t=c([]),a=_,e=c(0),n=c({id:0,foodId:0,wholePrice:null,sellPrice:null,purchasePrice:null,updateTime:"",addAccountId:0,addAccountName:""}),i=async()=>{let u=await V(a.id);console.log(u),t.value=u.data.list};i();const r=()=>{i()},m=c(!1),D=()=>{m.value=!1},h=u=>{e.value=u.id,m.value=!0,n.value=u};return(u,b)=>{const d=f("el-table-column"),A=f("el-button"),g=f("el-table");return v(),P("div",null,[s(g,{data:t.value,style:{width:"100%"}},{default:o(()=>[s(d,{prop:"updateTime",label:"价格更新日期"}),s(d,{prop:"wholePrice",label:"批发价"}),s(d,{prop:"sellPrice",label:"零售价"}),s(d,{prop:"purchasePrice",label:"采购价"}),s(d,{prop:"addAccountName",label:"更新人"}),s(d,{label:"操作",width:"100",fixed:"right"},{default:o(k=>[s(A,{link:"",type:"primary",onClick:W=>h(k.row)},{default:o(()=>[...b[0]||(b[0]=[y(" 编辑 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),s(B,{"is-show":m.value,close:D,id:e.value,foodPrice:n.value,onRefreshList:r},null,8,["is-show","id","foodPrice"])])}}}),E={class:"body"},O={class:"date"},R={class:"btn"},M=x({__name:"PriceAnalysis",setup(_){const t=c();return w(()=>{const a=sessionStorage.getItem("foodDetails");a&&(t.value=JSON.parse(a))}),(a,e)=>{const n=f("el-card"),i=f("el-button");return v(),P("div",E,[s(n,null,{default:o(()=>[l("div",O,[l("p",null,[e[0]||(e[0]=l("span",{class:"title"},"食材名称:",-1)),l("span",null,p(t.value?.name),1)]),l("p",null,[e[1]||(e[1]=l("span",{class:"title"},"价格更新于:",-1)),l("span",null,p(t.value?.updateTime),1)])]),l("p",null,[e[2]||(e[2]=l("span",{class:"title"},"供应商:",-1)),l("span",null,p(t.value?.supplierName),1)]),l("p",null,[e[3]||(e[3]=l("span",{class:"title"},"当前批发价:",-1)),l("span",null,p(t.value?.wholePrice),1)]),l("p",null,[e[4]||(e[4]=l("span",{class:"title"},"当前零售价:",-1)),l("span",null,p(t.value?.sellPrice),1)]),l("p",null,[e[5]||(e[5]=l("span",{class:"title"},"当前采购价:",-1)),l("span",null,p(t.value?.purchasePrice),1)])]),_:1}),s(n,null,{default:o(()=>[e[6]||(e[6]=l("p",null,"价格趋势",-1)),s($)]),_:1}),t.value&&t.value.id!==void 0?(v(),F(n,{key:0},{default:o(()=>[e[7]||(e[7]=l("p",null,"价格更新记录",-1)),s(z,{id:t.value?.id},null,8,["id"])]),_:1})):I("",!0),l("div",R,[s(i,null,{default:o(()=>[...e[8]||(e[8]=[y("返回",-1)])]),_:1})])])}}}),q=S(M,[["__scopeId","data-v-728a1f73"]]);export{q as default};
