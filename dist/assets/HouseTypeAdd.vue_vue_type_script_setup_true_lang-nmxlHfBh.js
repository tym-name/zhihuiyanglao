import{c as A,d as B}from"./house-0UauvkXi.js";import{d as N,m as p,i as U,r as v,k as _,l as g,b as n,c as h,a as D,e as a,w as s,f as R,g as V,E as i}from"./index-DSXWNbz6.js";const T={class:"dialog-footer"},H=N({__name:"HouseTypeAdd",props:p({editData:{}},{modelValue:{},modelModifiers:{}}),emits:p(["save-success"],["update:modelValue"]),setup(c,{emit:y}){const r=U(c,"modelValue"),b=c,u=v(),o=_({name:"",id:0}),l=v(!1),w=_({name:[{required:!0,message:"请输入房型名称",trigger:"blur"}]}),k=y,m=()=>{o.name="",o.id=0,u.value?.clearValidate()};g(()=>b.editData,t=>{t?(l.value=!0,Object.assign(o,t),console.log("子组件接收的编辑数据：",t)):(l.value=!1,m())},{immediate:!0}),g(r,t=>{t||m()});const x=async()=>{if(u.value)try{await u.value.validate()}catch{i.error("表单校验失败，请完善必填项");return}try{l.value?(await A(o),i.success("更新成功")):(await B(o),i.success("添加成功")),r.value=!1,k("save-success"),m()}catch(t){i.error(l.value?"更新失败，请重试":"添加失败，请重试"),console.error(l.value?"服务更新失败":"服务添加失败",t)}};return(t,e)=>{const C=n("el-input"),E=n("el-form-item"),F=n("el-form"),f=n("el-button"),M=n("el-dialog");return D(),h("div",null,[a(M,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=d=>r.value=d),title:l.value?"编辑房型":"新增房型",width:"500"},{footer:s(()=>[R("div",T,[a(f,{onClick:e[1]||(e[1]=d=>r.value=!1)},{default:s(()=>[...e[3]||(e[3]=[V("取消",-1)])]),_:1}),a(f,{type:"primary",onClick:x},{default:s(()=>[...e[4]||(e[4]=[V(" 提交 ",-1)])]),_:1})])]),default:s(()=>[a(F,{ref_key:"ruleFormRef",ref:u,style:{"max-width":"600px"},model:o,rules:w,"label-width":"auto"},{default:s(()=>[a(E,{label:"房型名称",prop:"name"},{default:s(()=>[a(C,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=d=>o.name=d),placeholder:"请输入房型名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{H as _};
