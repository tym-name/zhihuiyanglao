import{T}from"./table-BDVlGf5e.js";import{p as B}from"./purchase-yWWo2ZEt.js";import{c as I}from"./company-2RAv3DgF.js";import{d as L,r as p,k as N,b as n,n as b,a as u,w as l,e as t,f as M,g as i,c as y,F as g,v as k,u as P,B as R,_ as U}from"./index-DSXWNbz6.js";const F=L({__name:"Purchase",setup(z){const o=p({pageSize:10,page:1,companyId:"",state:"",beginDate:"",endDate:""}),V=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"创建时间",prop:"addTime"},{label:"申请人",prop:"addAccountName"},{label:"机构名称",prop:"companyName"},{label:"品种数",prop:"counts"},{label:"期望到货日期",prop:"receiveTime"},{label:"状态",prop:"state"},{label:"操作",slot:"operate",width:180,fixed:"right"}],h=[{value:"已经发货",label:"已经发货"},{value:"待提交",label:"待提交"}],f=p([]),D=N({name:""});(async()=>{const s=await I(D);console.log("机构列表",s),f.value=s.data.list})();const d=p([]),w=async()=>{o.value.companyId="",d.value=[],o.value.state="",o.value.beginDate="",o.value.endDate="",m.value&&m.value.refresh()},m=p(),x=s=>{R.push({name:"PurchaseDetail",params:{id:s}})};return(s,a)=>{const _=n("el-option"),v=n("el-select"),r=n("el-form-item"),Y=n("el-date-picker"),c=n("el-button"),C=n("el-form");return u(),b(T,{ref_key:"tableRef",ref:m,columns:V,"init-params":o.value,"fetch-data":P(B)},{search:l(()=>[t(C,{model:o.value,"label-width":"auto",inline:""},{default:l(()=>[t(r,{label:"机构名称："},{default:l(()=>[t(v,{modelValue:o.value.companyId,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.companyId=e),placeholder:"请选择",style:{width:"180px"},clearable:""},{default:l(()=>[(u(!0),y(g,null,k(f.value,e=>(u(),b(_,{label:e.name,value:e.name},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"期待到货日期："},{default:l(()=>[t(Y,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value=e),type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间",style:{width:"350px"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"状态："},{default:l(()=>[t(v,{modelValue:o.value.state,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.state=e),placeholder:"请选择",style:{width:"180px"},clearable:""},{default:l(()=>[(u(),y(g,null,k(h,e=>t(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(r,null,{default:l(()=>[t(c,{type:"primary"},{default:l(()=>[...a[3]||(a[3]=[i("查询",-1)])]),_:1}),t(c,{onClick:w},{default:l(()=>[...a[4]||(a[4]=[i("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),operate:l(({row:e})=>[t(c,{link:"",type:"primary",onClick:E=>x(e.id)},{default:l(()=>[...a[5]||(a[5]=[M("i",{class:"iconfont icon-meals"},null,-1),i("查看详情",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"])}}}),G=U(F,[["__scopeId","data-v-397413ee"]]);export{G as default};
