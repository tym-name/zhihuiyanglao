import{T as $}from"./table-BDVlGf5e.js";import{h as U,_ as j,a as A,b as H}from"./HouseAdd.vue_vue_type_script_setup_true_lang-CWWlvLD-.js";import{_ as M}from"./CascaderBeg.vue_vue_type_script_setup_true_lang-_gtH4QnK.js";import{d as R,r as i,b as m,c as q,a as _,e as a,n as z,p as F,w as t,f as p,g as u,u as h,h as y,E as f,_ as G}from"./index-DSXWNbz6.js";import"./house-0UauvkXi.js";import"./Uploads-hqb4toZy.js";import"./building-CNUBr-fR.js";import"./convertToTree-Coeds9PE.js";const J=R({__name:"House",setup(K){const o=i({name:"",buildingId:null}),v=i(!0),d=i(!1),r=i(null),b=i(void 0),C=()=>{b.value=void 0,d.value=!0};let k=l=>{o.value.buildingId=l[l.length-1]};const V=l=>{b.value=l,d.value=!0},x=()=>{r.value?.refresh()},B=l=>{y.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await A(l),f({type:"success",message:"删除成功"}),r.value?.refresh()}).catch(()=>{f({type:"info",message:"已取消删除"})})},D=l=>{console.log("选中的数据：",l),c.value=l,v.value=l.length===0},c=i([]),T=()=>{c.value.length!==0&&y.confirm(`是否删除选中的 ${c.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const l=c.value.map(e=>e.id);await H(l),f({type:"success",message:"批量删除成功"}),r.value?.getData(),v.value=!0}).catch(()=>{f({type:"info",message:"已取消删除"})})},w=()=>{r.value?.refresh()},E=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"房间号",prop:"name"},{label:"楼层",prop:"buildingName"},{label:"床位",prop:"beds"},{label:"创建时间",prop:"addTime"},{label:"创建人",prop:"addAccountName"},{label:"操作",slot:"operate",width:180,fixed:"right"}];return(l,e)=>{const s=m("el-button"),N=m("el-input"),g=m("el-form-item"),S=m("el-form");return _(),q("div",null,[a($,{ref_key:"tableRef",ref:r,onSelectionChange:D,"init-params":o.value,columns:E,"fetch-data":h(U)},{buttons:t(()=>[a(s,{type:"success",onClick:C},{default:t(()=>[...e[3]||(e[3]=[p("i",{class:"iconfont icon-jia"},null,-1),u("新增房间",-1)])]),_:1}),a(s,{type:"danger",onClick:T,disabled:v.value},{default:t(()=>[...e[4]||(e[4]=[p("i",{class:"iconfont icon-shanchu"},null,-1),u("批量删除 ",-1)])]),_:1},8,["disabled"])]),search:t(()=>[a(S,{inline:!0,class:"demo-form-inline"},{default:t(()=>[a(g,{label:"房间号:"},{default:t(()=>[a(N,{placeholder:"请输入机构名称",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.name=n),clearable:""},null,8,["modelValue"])]),_:1}),a(g,{label:"楼栋:"},{default:t(()=>[a(M,{modelValue:o.value.buildingId,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.buildingId=n),onBedChange:h(k),type:"bed"},null,8,["modelValue","onBedChange"])]),_:1}),a(g,null,{default:t(()=>[a(s,{type:"primary",onClick:w},{default:t(()=>[...e[5]||(e[5]=[u("查询",-1)])]),_:1}),a(s,null,{default:t(()=>[...e[6]||(e[6]=[u("重置",-1)])]),_:1})]),_:1})]),_:1})]),operate:t(({row:n})=>[a(s,{link:"",type:"primary",onClick:I=>V(n)},{default:t(()=>[...e[7]||(e[7]=[p("i",{class:"iconfont icon-bianji"},null,-1),u("编辑",-1)])]),_:1},8,["onClick"]),a(s,{link:"",type:"danger",onClick:I=>B(n.id)},{default:t(()=>[...e[8]||(e[8]=[p("i",{class:"iconfont icon-shanchu"},null,-1),u("删除 ",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"]),d.value?(_(),z(j,{key:0,onSaveSuccess:x,"edit-data":b.value,modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=n=>d.value=n)},null,8,["edit-data","modelValue"])):F("",!0)])}}}),ee=G(J,[["__scopeId","data-v-b60e46d3"]]);export{ee as default};
