const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BedLeft-BGFjE_f3.js","assets/building-CNUBr-fR.js","assets/index-DSXWNbz6.js","assets/index-CikMMB3U.css","assets/convertToTree-Coeds9PE.js"])))=>i.map(i=>d[i]);
import{d as I,r as n,l as N,b as V,c as E,a as _,f as t,n as P,p as A,e as o,u as b,Q as M,w as s,g as f,t as R,R as Y,F as L,E as r,h as y,S as $,T as v,_ as j}from"./index-DSXWNbz6.js";import{T as F}from"./table-BDVlGf5e.js";import{B as H,b as z,a as O,c as Q}from"./BedDialog-BJfgCuDu.js";const q={style:{display:"flex"}},G={style:{width:"20%"}},J={style:{"margin-left":"20px",width:"80%"}},K=I({__name:"Bed",setup(U){const D=M(()=>$(()=>import("./BedLeft-BGFjE_f3.js"),__vite__mapDeps([0,1,2,3,4]))),i=n(null),h=n(!0);let d=n(!1);v("dialogVisible",d);const l=n({id:0,closeDialog:()=>{d.value=!1},houseName:"",houseId:0,name:"",price:0});v("DialogData",l);const g=e=>{if(!l.value.houseName&&!c.value.houseId)return r.info("请选择房间");l.value.id=e.id||0,l.value.name=e.name,l.value.price=e.price||void 0,d.value=!0},B=()=>{i.value?.refresh()},x=e=>{y.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await z(e),r({type:"success",message:"删除成功"}),i.value?.refresh()}).catch(()=>{r({type:"info",message:"已取消删除"})})},C=e=>{console.log("选中的数据：",e),u.value=e,h.value=e.length===0},u=n([]),k=()=>{u.value.length!==0&&y.confirm(`是否删除选中的 ${u.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=u.value.map(a=>a.id);await O(e),r({type:"success",message:"批量删除成功"}),i.value?.getData(),h.value=!0}).catch(()=>{r({type:"info",message:"已取消删除"})})},c=n({page:1,pageSize:10,houseId:0});v("listParams",c);const T=async e=>{const a={...e,houseId:c.value.houseId};return await Q(a)};N(()=>c.value.houseId,()=>{i.value?.refresh()});const S=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"床位号",prop:"name"},{label:"价格",prop:"price"},{label:"创建人",prop:"addAccountName"},{label:"创建日期",prop:"addTime",formatTime:"YYYY-MM-DD HH:mm"},{label:"状态",prop:"state",slot:"state"},{label:"操作",slot:"operate",width:180,fixed:"right"}];return(e,a)=>{const p=V("el-button");return _(),E(L,null,[t("div",q,[t("div",G,[o(b(D),{style:{height:"100%"}})]),t("div",J,[o(F,{onSelectionChange:C,ref_key:"tableRef",ref:i,columns:S,"fetch-data":T,"init-params":c.value},{buttons:s(()=>[o(p,{type:"success",onClick:g},{default:s(()=>[...a[0]||(a[0]=[t("i",{class:"iconfont icon-jia"},null,-1),f("新增房间",-1)])]),_:1}),o(p,{type:"danger",onClick:k,disabled:h.value},{default:s(()=>[...a[1]||(a[1]=[t("i",{class:"iconfont icon-shanchu"},null,-1),f("批量删除 ",-1)])]),_:1},8,["disabled"])]),state:s(({row:m})=>[t("div",null,R(m.state===0?"未入住":"已入住"),1)]),operate:s(({row:m})=>[o(p,{link:"",type:"primary",onClick:w=>g(m)},{default:s(()=>[...a[2]||(a[2]=[t("i",{class:"iconfont icon-bianji"},null,-1),f("编辑",-1)])]),_:1},8,["onClick"]),o(p,{link:"",type:"danger",onClick:w=>x(m.id)},{default:s(()=>[...a[3]||(a[3]=[t("i",{class:"iconfont icon-shanchu"},null,-1),f("删除 ",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params"])])]),b(d)?(_(),P(H,Y({key:0,onSaveSuccess:B},l.value),null,16)):A("",!0)],64)}}}),ae=j(K,[["__scopeId","data-v-9f04b7ea"]]);export{ae as default};
