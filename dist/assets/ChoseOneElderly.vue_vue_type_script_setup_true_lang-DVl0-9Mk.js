import{D as m,d as k,r as v,b as i,c as A,a as T,e as l,w as r,g as _,u as U,t as N}from"./index-DSXWNbz6.js";import{g as F}from"./activity-DcouU_la.js";const L=e=>m.get("/bloodPressure/list",e),O=()=>m.get("/building/list"),q=e=>m.delete(`bloodPressure/delete/${e}`),H=e=>m.post("/bloodPressure/deleteAll",e),J=e=>m.get(`/bloodPressure/get/${e}`),K=e=>m.post("/bloodPressure/add",e),Q=e=>m.put("/bloodPressure/update",e),M=e=>{if(!Array.isArray(e))return[];const s=new Set(e.map(o=>o.id));return e.filter(o=>{const d=o.id>0,p=o.companyId===1327,c=o.pid===0||s.has(o.pid);return d&&p&&c})},D=e=>{const s=new Map;return e.forEach(o=>{const d={value:o.id,label:o.name};s.set(o.id,d)}),s},$=(e,s)=>{const o=[];return e.forEach(d=>{const p=s.get(d.id);if(!p)return;const c=d.pid;if(c===0)o.push(p);else{const t=s.get(c);t&&(t.children||(t.children=[]),t.children.push(p))}}),o},W=e=>{if(!Array.isArray(e)||e.length===0)return[];const s=M(e),o=D(s);return $(s,o)},X=k({__name:"ChoseOneElderly",props:{isShow:{type:Boolean},openElderly:{type:Function},closeElderly:{type:Function}},emits:["select-elderly"],setup(e,{emit:s}){const o="http://123.57.237.81:8080/caresystem/",d=e,p=v(0),c=v([]),t=v({page:"1",pageSize:"10",name:"",idCard:""}),g=async()=>{let u=await F(t.value);console.log("老人列表",u),c.value=u.data.list,p.value=u.data.counts};g();const h=()=>{t.value={name:"",idCard:""},g()},w=u=>{t.value.pageSize=u.toString(),g()},S=u=>{t.value.page=u.toString(),g()},V=s,I=u=>{V("select-elderly",u),d.closeElderly()};return(u,a)=>{const C=i("el-input"),y=i("el-form-item"),b=i("el-button"),z=i("el-form"),f=i("el-table-column"),B=i("el-image"),E=i("el-table"),x=i("el-pagination"),P=i("el-dialog");return T(),A("div",null,[l(P,{modelValue:d.isShow,"onUpdate:modelValue":a[4]||(a[4]=n=>d.isShow=n),title:"选择老人",width:"750","before-close":d.closeElderly},{default:r(()=>[l(z,{inline:!0,model:t.value,class:"demo-form-inline"},{default:r(()=>[l(y,{label:"姓名",style:{width:"200px"}},{default:r(()=>[l(C,{modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=n=>t.value.name=n),placeholder:"请输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),l(y,{label:"身份证号",style:{width:"230px"}},{default:r(()=>[l(C,{modelValue:t.value.idCard,"onUpdate:modelValue":a[1]||(a[1]=n=>t.value.idCard=n),placeholder:"请输入身份证号",clearable:""},null,8,["modelValue"])]),_:1}),l(y,null,{default:r(()=>[l(b,{type:"primary",onClick:g},{default:r(()=>[...a[5]||(a[5]=[_("查询",-1)])]),_:1}),l(b,{onClick:h},{default:r(()=>[...a[6]||(a[6]=[_("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),l(E,{data:c.value,style:{width:"100%"}},{default:r(()=>[l(f,{prop:"name",label:"姓名"}),l(f,{label:"头像"},{default:r(n=>[l(B,{style:{width:"50px",height:"50px"},src:U(o)+n.row.photo},null,8,["src"])]),_:1}),l(f,{label:"性别"},{default:r(n=>[_(N(n.row.gender===1?"男":"女"),1)]),_:1}),l(f,{prop:"address",label:"身份证号"}),l(f,{label:"操作"},{default:r(n=>[l(b,{type:"primary",size:"small",onClick:R=>I(n.row)},{default:r(()=>[...a[7]||(a[7]=[_(" 选择 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(x,{"current-page":t.value.page,"onUpdate:currentPage":a[2]||(a[2]=n=>t.value.page=n),"page-size":t.value.pageSize,"onUpdate:pageSize":a[3]||(a[3]=n=>t.value.pageSize=n),"page-sizes":[15,20,25,30],layout:"total, sizes, prev, pager, next, jumper",total:p.value,onSizeChange:w,onCurrentChange:S},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue","before-close"])])}}});export{X as _,K as a,H as b,J as c,q as d,O as e,W as f,L as g,Q as u};
