import{d as E,_ as A,a as D,b as F}from"./DischargeDialog.vue_vue_type_script_setup_true_lang-CSUB_mnd.js";import{T as G}from"./table-BDVlGf5e.js";import{d as S,k as $,r as p,c as U,e as l,w as a,b as i,u as M,F as L,g as n,t as g,h as v,E as y,a as P}from"./index-DSXWNbz6.js";const J=S({__name:"Discharge",setup(j){const d=$({id:0,companyId:0,elderlyId:0,expectDate:"",reason:"",state:0,addTime:"",addAccountId:0,begId:0,begName:"",addAccountName:"",elderlyName:"",elderlyPhoto:"",elderlyGender:"",elderlyIdCard:"",houseName:"",buildingName:""}),h=[{label:"序号",prop:"id",width:"100px"},{label:"老人姓名",prop:"elderlyName"},{label:"性别",slot:"elderlyGender"},{label:"身份证号",prop:"elderlyIdCard"},{label:"原床位",prop:"begName"},{label:"申请人",prop:"elderlyName"},{label:"申请日期",prop:"addTime"},{label:"状态",slot:"state"},{label:"操作",slot:"operate",width:180,fixed:"right"}],o=p(),_=async s=>{v.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{y({type:"success",message:"删除成功"}),await D(s),o.value?.refresh()}).catch(()=>{y({type:"info",message:"已取消删除"})})},r=p([]),C=s=>{r.value=s.map(e=>e.id)},N=async()=>{r.value.length!==0&&(await v.confirm(`确定删除这${r.value.length}项数据吗? 删除后无法恢复`,"警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await F(r.value),r.value=[],o.value?.refresh(),y.success("删除成功"))},m=p(!1),c=p(null),x=()=>{c.value=null,m.value=!0},k=async s=>{c.value={...s},m.value=!0},w=()=>{o.value?.refresh(),c.value=null},I=()=>{d.elderlyName="",d.elderlyIdCard="",o.value&&o.value.refresh({elderlyName:"",elderlyIdCard:""}),r.value=[]},V=()=>{o.value&&o.value.refresh({elderlyName:d.elderlyName,elderlyIdCard:d.elderlyIdCard})};return(s,e)=>{const b=i("el-input"),f=i("el-form-item"),u=i("el-button"),T=i("el-form"),B=i("el-card");return P(),U(L,null,[l(B,{style:{"margin-bottom":"10px"}},{default:a(()=>[l(T,{model:d,"label-width":"auto",inline:""},{default:a(()=>[l(f,{label:"老人姓名:"},{default:a(()=>[l(b,{modelValue:d.elderlyName,"onUpdate:modelValue":e[0]||(e[0]=t=>d.elderlyName=t),clearable:"",placeholder:"请输入老人姓名",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),l(f,{label:"身份证号码:"},{default:a(()=>[l(b,{modelValue:d.elderlyIdCard,"onUpdate:modelValue":e[1]||(e[1]=t=>d.elderlyIdCard=t),clearable:"",placeholder:"请输入身份证号码",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),l(f,null,{default:a(()=>[l(u,{type:"primary",onClick:V},{default:a(()=>[...e[3]||(e[3]=[n("查询",-1)])]),_:1}),l(u,{onClick:I},{default:a(()=>[...e[4]||(e[4]=[n("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(G,{ref_key:"tableRef",ref:o,columns:h,"fetch-data":M(E),onSelectionChange:C,"show-selection-column":!0},{buttons:a(()=>[l(u,{type:"success",onClick:x},{default:a(()=>[...e[5]||(e[5]=[n("新增",-1)])]),_:1}),l(u,{type:"danger",onClick:N,disabled:r.value.length===0},{default:a(()=>[...e[6]||(e[6]=[n("批量删除",-1)])]),_:1},8,["disabled"])]),elderlyGender:a(({row:t})=>[n(g(t.elderlyGender==0?"女":"男"),1)]),state:a(({row:t})=>[n(g(t.state==1?"未出院":"已出院"),1)]),operate:a(({row:t})=>[l(u,{link:"",type:"primary",onClick:R=>k(t)},{default:a(()=>[...e[7]||(e[7]=[n("编辑",-1)])]),_:1},8,["onClick"]),l(u,{link:"",type:"danger",onClick:R=>_(t.id)},{default:a(()=>[...e[8]||(e[8]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["fetch-data"]),l(A,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),editRow:c.value,onRefresh:w},null,8,["modelValue","editRow"])],64)}}});export{J as default};
