import{c as U,d as P,a as j}from"./company-Cx-MsYTh.js";import{T as F}from"./table-B1my3jl3.js";import{R as I}from"./ResetPasswordDialog-3MdB3bDB.js";import{d as M,r as s,c as L,e as l,w as n,u as Q,a as f,g as r,f as i,Q as _,E as k,h as d,b as q,_ as z}from"./index-D6YPj1KB.js";const G=M({__name:"Company",setup(H){const u=s({name:"",adminName:""}),c=s(null),v=s(!0),m=s(!1),g=s(0),y=s(""),x=a=>{g.value=a.id,y.value=a.name,m.value=!0,console.log("传递给弹窗的机构名称：",y.value)},N=()=>{m.value=!1,c.value?.refresh()},V=a=>{d.error(`密码重置失败：${a.msg||"未知错误"}`),console.error("重置密码失败:",a)},B=()=>{c.value?.refresh()},R=()=>{u.value={name:"",adminName:""},c.value?.refresh()},T=()=>{_.push("/company-add")},w=a=>{console.log("点击修改机构",a),_.push(`/company-add?id=${a.id}`)},D=a=>{k.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await P(a),d({type:"success",message:"删除成功"}),c.value?.refresh()}).catch(()=>{d({type:"info",message:"已取消删除"})})},p=s([]),$=()=>{p.value.length!==0&&k.confirm(`是否删除选中的 ${p.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const a=p.value.map(e=>e.id);await j(a),d({type:"success",message:"批量删除成功"}),c.value?.getData(),v.value=!0}).catch(()=>{d({type:"info",message:"已取消删除"})})},S=a=>{console.log("选中的数据：",a),p.value=a,v.value=a.length===0},A=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"机构名称",prop:"name"},{label:"区域",prop:"address"},{label:"管理员姓名",prop:"adminName"},{label:"联系电话",prop:"telephone"},{label:"管理员账号",prop:"adminUserName"},{label:"操作",slot:"operate",width:260,fixed:"right"}];return(a,e)=>{const o=f("el-button"),h=f("el-input"),b=f("el-form-item"),E=f("el-form");return q(),L("div",null,[l(F,{ref_key:"tableRef",ref:c,onSelectionChange:S,columns:A,"init-params":u.value,"fetch-data":Q(U)},{buttons:n(()=>[l(o,{type:"success",onClick:T},{default:n(()=>[...e[3]||(e[3]=[r("i",{class:"iconfont icon-jia"},null,-1),i("添加",-1)])]),_:1}),l(o,{type:"danger",onClick:$,disabled:v.value},{default:n(()=>[...e[4]||(e[4]=[r("i",{class:"iconfont icon-shanchu"},null,-1),i("批量删除 ",-1)])]),_:1},8,["disabled"])]),search:n(()=>[l(E,{inline:!0,class:"demo-form-inline"},{default:n(()=>[l(b,{label:"机构名称:"},{default:n(()=>[l(h,{placeholder:"请输入机构名称",modelValue:u.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.name=t),clearable:""},null,8,["modelValue"])]),_:1}),l(b,{label:"管理员姓名:"},{default:n(()=>[l(h,{placeholder:"请输入管理员姓名",modelValue:u.value.adminName,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.adminName=t),clearable:""},null,8,["modelValue"])]),_:1}),l(b,null,{default:n(()=>[l(o,{type:"primary",onClick:B},{default:n(()=>[...e[5]||(e[5]=[i("查询",-1)])]),_:1}),l(o,{onClick:R},{default:n(()=>[...e[6]||(e[6]=[i("重置",-1)])]),_:1})]),_:1})]),_:1})]),operate:n(({row:t})=>[l(o,{link:"",type:"primary",onClick:C=>x(t)},{default:n(()=>[...e[7]||(e[7]=[r("i",{class:"iconfont icon-shuaxin"},null,-1),i("重置密码 ",-1)])]),_:1},8,["onClick"]),l(o,{link:"",type:"primary",onClick:C=>w(t)},{default:n(()=>[...e[8]||(e[8]=[r("i",{class:"iconfont icon-bianji"},null,-1),i("修改",-1)])]),_:1},8,["onClick"]),l(o,{link:"",type:"danger",onClick:C=>D(t.id)},{default:n(()=>[...e[9]||(e[9]=[r("i",{class:"iconfont icon-shanchu"},null,-1),i("删除 ",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"]),l(I,{visible:m.value,"onUpdate:visible":e[2]||(e[2]=t=>m.value=t),"account-id":g.value,name:y.value,onResetSuccess:N,onResetFail:V},null,8,["visible","account-id","name"])])}}}),X=z(G,[["__scopeId","data-v-908390bd"]]);export{X as default};
