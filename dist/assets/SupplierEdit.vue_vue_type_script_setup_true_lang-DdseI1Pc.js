import{c as M}from"./Supplier-Dk0aX1YN.js";import{d as y,m as w,i as x,k as f,r as C,b as n,c as E,a as S,e as l,w as r,f as U,g,E as c}from"./index-DSXWNbz6.js";const q={class:"dialog-footer"},N=y({__name:"SupplierEdit",props:w({handleSuccess:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const s=x(i,"modelValue"),o=f({id:0,companyId:0,name:"",linkMan:"",mobile:"",foodCounts:1}),V=f({name:[{required:!0,message:"请输入供应商名称",trigger:"blur"}],linkMan:[{required:!0,message:"请输入联系人",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]});let b=i;const d=C(),_=async()=>{if(d.value)try{await d.value.validate();const a=await M(o);console.log("添加供应商",a),s.value=!1,c.success("添加供应商成功"),b.handleSuccess()}catch(a){console.log("表单验证失败或请求失败:",a),a&&typeof a=="object"&&"message"in a&&c.error(a.message)}};return(a,e)=>{const m=n("el-input"),u=n("el-form-item"),v=n("el-form"),p=n("el-button"),k=n("el-dialog");return S(),E("div",null,[l(k,{modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value=t),title:"新增供应商",width:"500"},{footer:r(()=>[U("div",q,[l(p,{onClick:e[3]||(e[3]=t=>s.value=!1)},{default:r(()=>[...e[5]||(e[5]=[g("取消",-1)])]),_:1}),l(p,{type:"primary",onClick:_},{default:r(()=>[...e[6]||(e[6]=[g(" 确定 ",-1)])]),_:1})])]),default:r(()=>[l(v,{ref_key:"ruleFormRef",ref:d,style:{"max-width":"600px"},model:o,rules:V,"label-width":"auto"},{default:r(()=>[l(u,{label:"供应商名称",prop:"name"},{default:r(()=>[l(m,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.name=t),placeholder:"供应商名称"},null,8,["modelValue"])]),_:1}),l(u,{label:"联系人",prop:"linkMan"},{default:r(()=>[l(m,{modelValue:o.linkMan,"onUpdate:modelValue":e[1]||(e[1]=t=>o.linkMan=t),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1}),l(u,{label:"联系电话",prop:"mobile"},{default:r(()=>[l(m,{modelValue:o.mobile,"onUpdate:modelValue":e[2]||(e[2]=t=>o.mobile=t),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{N as _};
