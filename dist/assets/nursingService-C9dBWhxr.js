import{b as B,c as D,d as V}from"./nursingService-CyisoriW.js";import{T}from"./table-B1my3jl3.js";import{_ as w}from"./nursingServiceAdd.vue_vue_type_script_setup_true_lang-DQ3bRoly.js";import{d as E,r as l,a as N,c as $,b as v,e as s,n as j,p as A,w as n,g as r,f as d,u as M,E as g,h as p,_ as R}from"./index-D6YPj1KB.js";const I=E({__name:"nursingService",setup(L){const f=l(!0),a=l(!1),o=l(null),m=l(void 0),b=()=>{m.value=void 0,a.value=!0},h=t=>{m.value=t,a.value=!0},y=()=>{o.value?.refresh()},_=t=>{g.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await D(t),p({type:"success",message:"删除成功"}),o.value?.refresh()}).catch(()=>{p({type:"info",message:"已取消删除"})})},k=t=>{console.log("选中的数据：",t),i.value=t,f.value=t.length===0},i=l([]),C=()=>{i.value.length!==0&&g.confirm(`是否删除选中的 ${i.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const t=i.value.map(e=>e.id);await V(t),p({type:"success",message:"批量删除成功"}),o.value?.getData(),f.value=!0}).catch(()=>{p({type:"info",message:"已取消删除"})})},x=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"服务名称",prop:"name"},{label:"服务描述",prop:"content"},{label:"操作",slot:"operate",width:180,fixed:"right"}];return(t,e)=>{const c=N("el-button");return v(),$("div",null,[s(T,{ref_key:"tableRef",ref:o,onSelectionChange:k,columns:x,"fetch-data":M(B)},{buttons:n(()=>[s(c,{type:"success",onClick:b},{default:n(()=>[...e[1]||(e[1]=[r("i",{class:"iconfont icon-jia"},null,-1),d("新增护理服务",-1)])]),_:1}),s(c,{type:"danger",onClick:C,disabled:f.value},{default:n(()=>[...e[2]||(e[2]=[r("i",{class:"iconfont icon-shanchu"},null,-1),d("批量删除 ",-1)])]),_:1},8,["disabled"])]),operate:n(({row:u})=>[s(c,{link:"",type:"primary",onClick:S=>h(u)},{default:n(()=>[...e[3]||(e[3]=[r("i",{class:"iconfont icon-bianji"},null,-1),d("编辑",-1)])]),_:1},8,["onClick"]),s(c,{link:"",type:"danger",onClick:S=>_(u.id)},{default:n(()=>[...e[4]||(e[4]=[r("i",{class:"iconfont icon-shanchu"},null,-1),d("删除 ",-1)])]),_:1},8,["onClick"])]),_:1},8,["fetch-data"]),a.value?(v(),j(w,{key:0,onSaveSuccess:y,"edit-data":m.value,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u)},null,8,["edit-data","modelValue"])):A("",!0)])}}}),G=R(I,[["__scopeId","data-v-066e0bfa"]]);export{G as default};
