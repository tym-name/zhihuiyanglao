import{T as S}from"./table-BDVlGf5e.js";import{s as U,a as D,b as M}from"./staff-DkaIM1g7.js";import{r as $}from"./position-BwEY5D3f.js";import{d as G,k as x,r as b,b as s,c as p,a as i,e as a,w as l,F as _,v as w,n as j,g as d,t as k,f as q,u as z,h as V,E as y}from"./index-DSXWNbz6.js";const H=["src"],J="http://123.57.237.81:8080/caresystem/",Y=G({__name:"Carer",setup(K){const n=x({name:"",mobile:"",roles:""}),C=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"头像",slot:"photo"},{label:"姓名",prop:"name"},{label:"联系方式",prop:"mobile"},{label:"所属岗位",slot:"name"},{label:"操作",slot:"operate",width:180,fixed:"right"}],g=b([]),B=x({id:0,name:"",companyId:0,addAccountId:0,addAccountName:"",addTime:"",accountCounts:0,menuIds:void 0});(async()=>{const o=await $(B);console.log("所属岗位",o),g.value=o.data.list})();const m=b(),T=async o=>{V.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{y({type:"success",message:"删除成功"}),await D(o),m.value?.refresh()}).catch(()=>{y({type:"info",message:"已取消删除"})})},r=b([]),I=o=>{r.value=o.map(e=>e.id)},F=async()=>{r.value.length!==0&&(await V.confirm(`确定删除这${r.value.length}项数据吗? 删除后无法恢复`,"警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await M(r.value),r.value=[],m.value?.refresh(),y.success("删除成功"))},h=()=>{const o={...n};for(const e in o)(o[e]===""||o[e]===null||o[e]===void 0)&&delete o[e];m.value?.refresh(o)},L=()=>{n.name="",n.mobile="",n.roles="",h()};return(o,e)=>{const v=s("el-input"),c=s("el-form-item"),E=s("el-option"),A=s("el-select"),u=s("el-button"),N=s("el-form"),R=s("el-card");return i(),p(_,null,[a(R,{style:{"margin-bottom":"10px"}},{default:l(()=>[a(N,{model:n,"label-width":"auto",inline:""},{default:l(()=>[a(c,{label:"护工姓名:"},{default:l(()=>[a(v,{modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=t=>n.name=t),clearable:"",placeholder:"请输入护工姓名",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),a(c,{label:"联系方式:"},{default:l(()=>[a(v,{modelValue:n.mobile,"onUpdate:modelValue":e[1]||(e[1]=t=>n.mobile=t),clearable:"",placeholder:"请输入联系方式",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),a(c,{label:"所属岗位"},{default:l(()=>[a(A,{modelValue:n.roles,"onUpdate:modelValue":e[2]||(e[2]=t=>n.roles=t),placeholder:"请选择岗位",clearable:"",style:{width:"180px"}},{default:l(()=>[(i(!0),p(_,null,w(g.value,t=>(i(),j(E,{key:t,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(c,null,{default:l(()=>[a(u,{type:"primary",onClick:h},{default:l(()=>[...e[3]||(e[3]=[d("查询",-1)])]),_:1}),a(u,{onClick:L},{default:l(()=>[...e[4]||(e[4]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(S,{ref_key:"tableRef",ref:m,columns:C,"fetch-data":z(U),onSelectionChange:I},{buttons:l(()=>[a(u,{type:"success"},{default:l(()=>[...e[5]||(e[5]=[d("添加护工",-1)])]),_:1}),a(u,{type:"danger",onClick:F,disabled:r.value.length===0},{default:l(()=>[...e[6]||(e[6]=[d("批量删除",-1)])]),_:1},8,["disabled"])]),photo:l(({row:t})=>[q("img",{src:J+t.photo,style:{width:"50px",height:"50px"}},null,8,H)]),operate:l(({row:t})=>[a(u,{link:"",type:"danger",onClick:f=>T(t.id)},{default:l(()=>[...e[7]||(e[7]=[d("删除",-1)])]),_:1},8,["onClick"])]),enable:l(({row:t})=>[d(k(t.enable===1?"否":"是"),1)]),name:l(({row:t})=>[(i(!0),p(_,null,w(t.roles,f=>(i(),p("div",{key:f.id},k(f.name),1))),128))]),_:1},8,["fetch-data"])],64)}}});export{Y as default};
