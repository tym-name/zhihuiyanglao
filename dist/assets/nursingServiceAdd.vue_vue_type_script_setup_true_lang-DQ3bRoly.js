import{n as U,a as A}from"./nursingService-CyisoriW.js";import{d as B,m as g,i as D,r as _,k as V,l as b,a as u,c as E,b as N,e as o,w as r,g as h,f as y,v as q,h as d}from"./index-D6YPj1KB.js";const R={class:"dialog-footer"},P=B({__name:"nursingServiceAdd",props:g({editData:{}},{modelValue:{},modelModifiers:{}}),emits:g(["save-success"],["update:modelValue"]),setup(c,{emit:w}){const n=D(c,"modelValue"),x=c,i=_(),e=V({name:"",content:"",id:0}),a=_(!1),k=V({name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],content:[{required:!0,message:"请输入服务描述",trigger:"blur"}]}),C=w,m=()=>{e.name="",e.content="",e.id=0,i.value?.clearValidate()};b(()=>x.editData,l=>{l?(a.value=!0,Object.assign(e,l),console.log("子组件接收的编辑数据：",l)):(a.value=!1,m())},{immediate:!0}),b(n,l=>{l||m()});const F=async()=>{if(i.value)try{await i.value.validate()}catch{d.error("表单校验失败，请完善必填项");return}try{a.value?(await U(e),d.success("更新成功")):(await A(e),d.success("添加成功")),n.value=!1,C("save-success"),m()}catch(l){d.error(a.value?"更新失败，请重试":"添加失败，请重试"),console.error(a.value?"服务更新失败":"服务添加失败",l)}};return(l,t)=>{const p=u("el-input"),f=u("el-form-item"),M=u("el-form"),v=u("el-button"),S=u("el-dialog");return N(),E("div",null,[o(S,{modelValue:n.value,"onUpdate:modelValue":t[3]||(t[3]=s=>n.value=s),title:a.value?"编辑服务":"新增服务",width:"500"},{footer:r(()=>[h("div",R,[o(v,{onClick:t[2]||(t[2]=s=>n.value=!1)},{default:r(()=>[...t[4]||(t[4]=[y("取消",-1)])]),_:1}),o(v,{type:"primary",onClick:F},{default:r(()=>[y(q(a.value?"更新":"提交"),1)]),_:1})])]),default:r(()=>[o(M,{ref_key:"ruleFormRef",ref:i,style:{"max-width":"600px"},model:e,rules:k,"label-width":"auto"},{default:r(()=>[o(f,{label:"服务名称",prop:"name"},{default:r(()=>[o(p,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.name=s),placeholder:"请输入服务名称"},null,8,["modelValue"])]),_:1}),o(f,{label:"服务描述",prop:"content"},{default:r(()=>[o(p,{modelValue:e.content,"onUpdate:modelValue":t[1]||(t[1]=s=>e.content=s),rows:2,type:"textarea",placeholder:"请输入服务描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{P as _};
