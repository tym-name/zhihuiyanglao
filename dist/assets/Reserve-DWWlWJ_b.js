import{T as F}from"./table-BDVlGf5e.js";import{a as G,b as $}from"./Reserve-s3Ful1lR.js";import q from"./ReserveAdd-B_jQD7Rf.js";import{d as A,r as m,c as h,e as a,n as L,p as M,w as t,u as P,F as V,b as u,f as c,g as s,v as j,t as z,B as g,h as H,E as b,a as v,_ as J}from"./index-DSXWNbz6.js";import"./elderly-p1gfo6w8.js";const K=A({__name:"Reserve",setup(O){const d=m(null),y=m(!0),o=m({name:"",customerName:"",state:""}),p=m(!1),k=()=>{d.value?.refresh()},C=()=>{d.value?.refresh()},x=()=>{o.value={name:"",customerName:"",state:""},d.value?.refresh()},R=[{type:"selection",width:"50"},{label:"序号",prop:"id"},{label:"头像",image:"elderlyPhoto"},{label:"老人姓名",prop:"elderlyName"},{label:"性别",slot:"elderlyGender"},{label:"身份证号",prop:"elderlyIdCard"},{label:"预订人姓名",prop:"name",width:100},{label:"联系电话",prop:"mobile"},{label:"与老人关系",prop:"relation",width:100},{label:"预定床位",prop:"begName"},{label:"开始日期",prop:"startDate",width:120},{label:"预定时常（月）",prop:"addTime",width:130},{label:"已缴定金",prop:"amount"},{label:"剩余天数",prop:"day"},{label:"登记日期",prop:"startDate",width:120},{label:"操作",slot:"operate",width:350,fixed:"right"}],N=[{value:"1",label:"未签约"},{value:"2",label:"预定中"},{value:"3",label:"已住院"}],w=()=>{p.value=!0},B=async n=>{g.push({path:"/ReserveUpd",query:{elderlyId:n.elderlyId,id:n.id}})},D=async n=>{g.push({path:"/ReserveParticulars",query:{id:n.id}})},T=n=>{H.confirm("是否删除该条记录？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=await $(n);e.code===1e4?(b.success("删除成功"),d.value?.refresh()):b.error("删除失败："+e.msg)}).catch(()=>{b.info("已取消删除")})},U=n=>{console.log("选中的数据：",n),y.value=n.length===0};return(n,e)=>{const r=u("el-button"),f=u("el-input"),i=u("el-form-item"),E=u("el-option"),I=u("el-select"),S=u("el-form");return v(),h(V,null,[a(F,{ref_key:"tableRef",ref:d,onSelectionChange:U,"init-params":o.value,columns:R,"fetch-data":P(G)},{buttons:t(()=>[a(r,{type:"success",onClick:w},{default:t(()=>[...e[5]||(e[5]=[s("+ 新增",-1)])]),_:1}),a(r,{type:"danger",disabled:y.value},{default:t(()=>[...e[6]||(e[6]=[c("i",{class:"iconfont icon-shanchu"},null,-1),s("批量删除",-1)])]),_:1},8,["disabled"])]),elderlyGender:t(({row:l})=>[s(z(l.elderlyGender===1?"男":"女"),1)]),search:t(()=>[a(S,{inline:!0,class:"demo-form-inline",style:{height:"80px"}},{default:t(()=>[a(i,{label:"老人姓名:"},{default:t(()=>[a(f,{placeholder:"请输入老人姓名",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.name=l),clearable:""},null,8,["modelValue"])]),_:1}),a(i,{label:"身份证号:"},{default:t(()=>[a(f,{placeholder:"请输入身份证号",modelValue:o.value.customerName,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.customerName=l),clearable:""},null,8,["modelValue"])]),_:1}),a(i,{label:"床位:"},{default:t(()=>[a(I,{placeholder:"请选择床位",modelValue:o.value.state,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.state=l),style:{width:"200px"}},{default:t(()=>[(v(),h(V,null,j(N,l=>a(E,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"手机号:"},{default:t(()=>[a(f,{placeholder:"请输入",modelValue:o.value.mobile,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.mobile=l),clearable:""},null,8,["modelValue"])]),_:1}),a(i,{style:{width:"200px"}},{default:t(()=>[a(r,{type:"primary",onClick:C},{default:t(()=>[...e[7]||(e[7]=[s("查询",-1)])]),_:1}),a(r,{onClick:x},{default:t(()=>[...e[8]||(e[8]=[s("重置",-1)])]),_:1})]),_:1})]),_:1})]),operate:t(({row:l})=>[a(r,{link:"",type:"primary",onClick:_=>D(l)},{default:t(()=>[...e[9]||(e[9]=[c("i",{class:"iconfont icon-file"},null,-1),s("详情",-1)])]),_:1},8,["onClick"]),a(r,{link:"",type:"primary",onClick:_=>B(l)},{default:t(()=>[...e[10]||(e[10]=[c("i",{class:"iconfont icon-bianji"},null,-1),s("编辑",-1)])]),_:1},8,["onClick"]),a(r,{link:"",type:"danger",onClick:_=>T(l.id)},{default:t(()=>[...e[11]||(e[11]=[c("i",{class:"iconfont icon-shanchu"},null,-1),s("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"]),p.value?(v(),L(q,{key:0,modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=l=>p.value=l),onTableRefersh:k},null,8,["modelValue"])):M("",!0)],64)}}}),ee=J(K,[["__scopeId","data-v-b549b32b"]]);export{ee as default};
