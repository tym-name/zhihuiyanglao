import{a as w,A as V,b as A,c as D}from"./AddressAdd-CF47qmvX.js";import{T}from"./table-B1my3jl3.js";import{d as S,r as s,c as E,e as l,n as N,p as R,w as a,u as $,a as j,g as r,f as u,E as v,h as p,b as g,_ as M}from"./index-D6YPj1KB.js";const q=S({__name:"Address",setup(I){const o=s(null),f=s(!0),n=s(!1),m=s(void 0),b=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"巡检地点",prop:"name"},{label:"二维码",image:"qrcode"},{label:"操作",slot:"operate",width:360,fixed:"right"}],h=t=>{v.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await A(t),p({type:"success",message:"删除成功"}),o.value?.refresh()}).catch(()=>{p({type:"info",message:"已取消删除"})})},y=()=>{m.value=void 0,n.value=!0},k=t=>{m.value=t,n.value=!0},C=()=>{o.value?.refresh()},c=s([]),x=()=>{c.value.length!==0&&v.confirm(`是否删除选中的 ${c.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const t=c.value.map(e=>e.id);await D(t),p({type:"success",message:"批量删除成功"}),o.value?.getData(),f.value=!0}).catch(()=>{p({type:"info",message:"已取消删除"})})},_=t=>{console.log("选中的数据：",t),c.value=t,f.value=t.length===0};return(t,e)=>{const i=j("el-button");return g(),E("div",null,[l(T,{ref_key:"tableRef",ref:o,onSelectionChange:_,columns:b,"fetch-data":$(w)},{buttons:a(()=>[l(i,{type:"success",onClick:y},{default:a(()=>[...e[1]||(e[1]=[r("i",{class:"iconfont icon-jia"},null,-1),u("新增地址",-1)])]),_:1}),l(i,{type:"danger",onClick:x,disabled:f.value},{default:a(()=>[...e[2]||(e[2]=[r("i",{class:"iconfont icon-shanchu"},null,-1),u("批量删除 ",-1)])]),_:1},8,["disabled"])]),operate:a(({row:d})=>[l(i,{link:"",type:"primary",onClick:B=>k(d)},{default:a(()=>[...e[3]||(e[3]=[r("i",{class:"iconfont icon-bianji"},null,-1),u("修改",-1)])]),_:1},8,["onClick"]),l(i,{link:"",type:"danger",onClick:B=>h(d.id)},{default:a(()=>[...e[4]||(e[4]=[r("i",{class:"iconfont icon-shanchu"},null,-1),u("删除 ",-1)])]),_:1},8,["onClick"])]),_:1},8,["fetch-data"]),n.value?(g(),N(V,{key:0,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=d=>n.value=d),"edit-row":m.value,onSaveSuccess:C},null,8,["modelValue","edit-row"])):R("",!0)])}}}),F=M(q,[["__scopeId","data-v-2c7ad205"]]);export{F as default};
