import{T as w}from"./table-BDVlGf5e.js";import{D as _,d as N,r,b as i,n as A,a as E,w as t,e as l,f as g,g as s,u as M,h as R,E as b}from"./index-DSXWNbz6.js";const S=d=>_.get("/drugs/list",d),q=d=>_.post("/drugs/deleteAll",d),F=N({__name:"MedicineLogs",setup(d){const m=r(null),u=()=>{m.value.refresh()},y=[{type:"selection",width:"50"},{label:"序号",prop:"id"},{label:"老人姓名",prop:"elderlyName"},{label:"用药品种类",prop:"counts"},{label:"登记人",prop:"addAccountName"},{label:"最新登记时间",prop:"addTime"},{label:"操作",width:200,slot:"operate",fixed:"right"}],n=r({name:"",beginDate:""}),v=()=>{u()},h=()=>{n.value={name:"",beginDate:""},u()},x=r(!0),k=r([]),f=r([]),D=a=>{k.value=a,f.value=a.map(e=>e.id),x.value=a.length===0},V=async()=>{R.confirm("是否删除多条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let a=await q(f.value);console.log(a),a.code===1e4&&(b({type:"success",message:"删除成功"}),u())}).catch(()=>{b({type:"info",message:"取消删除"})})};return(a,e)=>{const B=i("el-input"),p=i("el-form-item"),C=i("el-date-picker"),o=i("el-button"),T=i("el-form");return E(),A(w,{ref_key:"tableRef",ref:m,columns:y,"fetch-data":M(S),"init-params":n.value,onSelectionChange:D},{search:t(()=>[l(T,{inline:!0,class:"demo-form-inline"},{default:t(()=>[l(p,{label:"老人:"},{default:t(()=>[l(B,{modelValue:n.value.name,"onUpdate:modelValue":e[0]||(e[0]=c=>n.value.name=c),placeholder:"请输入老人姓名",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{label:"登记时间:"},{default:t(()=>[l(C,{modelValue:n.value.beginDate,"onUpdate:modelValue":e[1]||(e[1]=c=>n.value.beginDate=c),type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),l(p,null,{default:t(()=>[l(o,{type:"primary",onClick:v},{default:t(()=>[...e[2]||(e[2]=[s("查询",-1)])]),_:1}),l(o,{onClick:h},{default:t(()=>[...e[3]||(e[3]=[s("重置",-1)])]),_:1})]),_:1})]),_:1})]),buttons:t(()=>[l(o,{type:"success"},{default:t(()=>[...e[4]||(e[4]=[s("用药登记",-1)])]),_:1}),l(o,{type:"danger",onClick:V},{default:t(()=>[...e[5]||(e[5]=[s("批量删除",-1)])]),_:1})]),operate:t(()=>[l(o,{link:"",type:"primary"},{default:t(()=>[...e[6]||(e[6]=[g("i",{class:"iconfont icon-xiangqing"},null,-1),s(" 查看详情 ",-1)])]),_:1}),l(o,{link:"",type:"primary"},{default:t(()=>[...e[7]||(e[7]=[g("i",{class:"iconfont icon-xiangqing"},null,-1),s(" 用药计划 ",-1)])]),_:1})]),_:1},8,["fetch-data","init-params"])}}});export{F as default};
