import{T as F}from"./table-BDVlGf5e.js";import{g as M,a as R,e as z}from"./elderly-p1gfo6w8.js";import{d as L,r as b,n as q,w as t,u as C,e as a,f as d,g as s,b as r,c as G,v as H,F as J,t as K,a as _,B as p,h as k,E as y,_ as O}from"./index-DSXWNbz6.js";import{_ as P}from"./CascaderBeg.vue_vue_type_script_setup_true_lang-_gtH4QnK.js";import"./building-CNUBr-fR.js";import"./convertToTree-Coeds9PE.js";import"./house-0UauvkXi.js";const Q=L({__name:"Elderly",setup(W){const c=b(null),g=b(!0),o=b({name:"",idCard:"",begId:0,state:null});let h=l=>{o.value.begId=l[l.length-1]};const V=()=>{c.value?.refresh()},x=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"头像",image:"photo"},{label:"老人姓名",prop:"name"},{label:"性别",prop:"state",slot:"gender"},{label:"身份证号",prop:"idCard",width:180},{label:"床位",prop:"begName"},{label:"状态",prop:"stateName"},{label:"操作",slot:"operate",width:520,fixed:"right"}],B=[{value:"1",label:"未签约"},{value:"2",label:"预定中"},{value:"3",label:"已住院"}],$=()=>{p.push("/elderly-edit")},w=l=>{console.log("点击修改老人",l),p.push(`/elderly-edit?id=${l.id}`)},D=l=>{p.push(`/elderly-records?id=${l.id}`)},T=l=>{p.push(`/elderly-work?id=${l.id}`)},E=l=>{p.push(`/elderly-schedule?id=${l.id}`)},I=l=>{k.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await R(l),y({type:"success",message:"删除成功"}),c.value?.refresh()}).catch(()=>{y({type:"info",message:"已取消删除"})})},m=b([]),N=()=>{m.value.length!==0&&k.confirm(`是否删除选中的 ${m.value.length} 条记录？`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const l=m.value.map(e=>e.id);await z(l),y({type:"success",message:"批量删除成功"}),c.value?.getData(),g.value=!0}).catch(()=>{y({type:"info",message:"已取消删除"})})},U=l=>{console.log("选中的数据：",l),m.value=l,g.value=l.length===0};return(l,e)=>{const i=r("el-button"),v=r("el-input"),u=r("el-form-item"),S=r("el-option"),j=r("el-select"),A=r("el-form");return _(),q(F,{ref_key:"tableRef",ref:c,onSelectionChange:U,"init-params":o.value,columns:x,"fetch-data":C(M)},{buttons:t(()=>[a(i,{type:"primary",onClick:$},{default:t(()=>[...e[4]||(e[4]=[s("新增老人",-1)])]),_:1}),a(i,{type:"danger",onClick:N,disabled:g.value},{default:t(()=>[...e[5]||(e[5]=[d("i",{class:"iconfont icon-shanchu"},null,-1),s("批量删除",-1)])]),_:1},8,["disabled"])]),gender:t(({row:n})=>[s(K(n.gender===1?"男":"女"),1)]),search:t(()=>[a(A,{inline:!0,class:"demo-form-inline"},{default:t(()=>[a(u,{label:"老人姓名:"},{default:t(()=>[a(v,{placeholder:"请输入老人姓名",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.name=n),clearable:""},null,8,["modelValue"])]),_:1}),a(u,{label:"身份证号:"},{default:t(()=>[a(v,{placeholder:"请输入身份证号",modelValue:o.value.idCard,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.idCard=n),clearable:""},null,8,["modelValue"])]),_:1}),a(u,{label:"床位:"},{default:t(()=>[a(P,{modelValue:o.value.begId,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.begId=n),onBedChange:C(h),type:"bed"},null,8,["modelValue","onBedChange"])]),_:1}),a(u,{label:"入住状况:"},{default:t(()=>[a(j,{placeholder:"请选择入住状况",modelValue:o.value.state,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value.state=n),style:{width:"200px"}},{default:t(()=>[(_(),G(J,null,H(B,n=>a(S,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(u,null,{default:t(()=>[a(i,{type:"primary",onClick:V},{default:t(()=>[...e[6]||(e[6]=[s("查询",-1)])]),_:1}),a(i,null,{default:t(()=>[...e[7]||(e[7]=[s("重置",-1)])]),_:1})]),_:1})]),_:1})]),operate:t(({row:n})=>[a(i,{link:"",type:"primary",onClick:f=>w(n)},{default:t(()=>[...e[8]||(e[8]=[d("i",{class:"iconfont icon-bianji"},null,-1),s("编辑",-1)])]),_:1},8,["onClick"]),a(i,{link:"",type:"primary",onClick:f=>D(n)},{default:t(()=>[...e[9]||(e[9]=[d("i",{class:"iconfont icon-file"},null,-1),s("档案管理",-1)])]),_:1},8,["onClick"]),a(i,{link:"",type:"primary",onClick:f=>T(n)},{default:t(()=>[...e[10]||(e[10]=[d("i",{class:"iconfont icon-zxdj"},null,-1),s("排班管理",-1)])]),_:1},8,["onClick"]),a(i,{link:"",type:"primary",onClick:f=>E(n)},{default:t(()=>[...e[11]||(e[11]=[d("i",{class:"iconfont icon-wenben"},null,-1),s("计划任务",-1)])]),_:1},8,["onClick"]),a(i,{link:"",type:"danger",onClick:f=>I(n.id)},{default:t(()=>[...e[12]||(e[12]=[d("i",{class:"iconfont icon-shanchu"},null,-1),s("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params","fetch-data"])}}}),ne=O(Q,[["__scopeId","data-v-bb9519d6"]]);export{ne as default};
