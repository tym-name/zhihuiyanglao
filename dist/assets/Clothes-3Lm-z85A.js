import{D as F,d as O,j as P,r as g,k as S,l as J,b as r,n as K,a as w,w as t,e as l,g as m,t as L,c as T,F as N,v as B,E as k,h as G}from"./index-DSXWNbz6.js";import{_ as Q}from"./ClothesDialog.vue_vue_type_script_setup_true_lang-CU54U8c5.js";import{T as W}from"./table-BDVlGf5e.js";const X=p=>F.get("/clothes/list",p),Z=p=>F.delete(`/clothes/delete/${p}`),ee=p=>F.post("/clothes/deleteAll",p),le=p=>F.put("/clothes/update",p),te=O({__name:"AddEditClothes",props:{modelValue:{type:Boolean},detailData:{}},emits:["update:modelValue","success"],setup(p,{emit:$}){const f=p,s=$,_=P({get(){return f.modelValue},set(u){s("update:modelValue",u)}}),D=P(()=>!!(f.detailData&&f.detailData.id)),x=[{value:"未解决"},{value:"已解决"}],V=[{value:"错衣"},{value:"缺衣"}],h=g(),o=S({id:0,companyId:0,elderlyId:0,title:"",content:"",type:"",state:"",addTime:"",addAccountId:0,addAccountName:"",begName:null,elderlyName:null,elderlyPhoto:null,elderlyGender:null,elderlyIdCard:null,houseName:null,buildingName:"",pictures:[]}),C=S({elderlyName:{required:!0,message:"请选择老人",trigger:"blur"},title:{required:!0,message:"标题不能为空",trigger:"blur"},type:{required:!0,message:"请选择分类",trigger:"blur"},state:{required:!0,message:"请选择状态",trigger:"blur"},content:{required:!0,message:"请填写活动内容",trigger:"blur"},pictures:{required:!0,message:"请上传活动图片",trigger:"blur"}});J(()=>f.modelValue,u=>{u&&(f.detailData&&f.detailData.id?Object.assign(o,f.detailData):y())},{immediate:!0});const M=async()=>{h.value&&(await h.value.validate(),D.value&&(await le(o),k.success("编辑成功"),_.value=!1),s("success"))},y=()=>{h.value?.resetFields(),Object.keys(o).forEach(u=>{u==="id"?o.id=0:u==="pictures"?o.pictures=[]:typeof o[u]=="string"?o[u]="":typeof o[u]=="number"?o[u]=0:o[u]=null})},I=g([{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]),b=(u,n)=>{console.log(u,n)},Y=u=>{console.log(u)},E=()=>{y()};return(u,n)=>{const i=r("el-button"),e=r("el-form-item"),U=r("el-input"),v=r("el-option"),q=r("el-select"),A=r("el-upload"),j=r("el-form"),c=r("el-dialog");return w(),K(c,{onClose:E,modelValue:_.value,"onUpdate:modelValue":n[6]||(n[6]=d=>_.value=d),title:D.value?"编辑洗衣错衣":"新增洗衣错 ",width:" 700"},{footer:t(()=>[l(i,{onClick:n[5]||(n[5]=d=>_.value=!1)},{default:t(()=>[...n[8]||(n[8]=[m("取消",-1)])]),_:1}),l(i,{type:"primary",onClick:M},{default:t(()=>[...n[9]||(n[9]=[m(" 提交 ",-1)])]),_:1})]),default:t(()=>[l(j,{ref_key:"ruleFormRef",ref:h,model:o,rules:C,"label-width":"auto"},{default:t(()=>[l(e,{label:"老人姓名",prop:"elderlyName"},{default:t(()=>[l(i,null,{default:t(()=>[m(L(o.elderlyName||"选择老人"),1)]),_:1})]),_:1}),l(e,{label:"标题",prop:"title",clearable:"",style:{width:"425px"}},{default:t(()=>[l(U,{modelValue:o.title,"onUpdate:modelValue":n[0]||(n[0]=d=>o.title=d),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),l(e,{label:"类型",prop:"type",clearable:"",style:{width:"425px"}},{default:t(()=>[l(q,{modelValue:o.type,"onUpdate:modelValue":n[1]||(n[1]=d=>o.type=d),placeholder:"请选择类型"},{default:t(()=>[(w(),T(N,null,B(V,d=>l(v,{key:d,label:d.value,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(e,{label:"状态",prop:"state",clearable:"",style:{width:"425px"}},{default:t(()=>[l(q,{modelValue:o.state,"onUpdate:modelValue":n[2]||(n[2]=d=>o.state=d),placeholder:"请选择状态"},{default:t(()=>[(w(),T(N,null,B(x,d=>l(v,{key:d,label:d.value,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(e,{label:"内容",prop:"content",clearable:"",style:{width:"425px"}},{default:t(()=>[l(U,{type:"textarea",modelValue:o.content,"onUpdate:modelValue":n[3]||(n[3]=d=>o.content=d),placeholder:"请输入内容"},null,8,["modelValue"])]),_:1}),l(e,{label:"图片",prop:"pictures"},{default:t(()=>[l(A,{"file-list":I.value,"onUpdate:fileList":n[4]||(n[4]=d=>I.value=d),class:"upload-demo",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","on-preview":Y,"on-remove":b,"list-type":"picture"},{default:t(()=>[l(i,{type:"primary"},{default:t(()=>[...n[7]||(n[7]=[m("选择照片",-1)])]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),de=O({__name:"Clothes",setup(p){const $=[{value:"未解决"},{value:"已解决"}],f=[{value:"错衣"},{value:"缺衣"}],s=S({id:0,companyId:0,elderlyId:0,title:"",content:"",type:"",state:"",addTime:"",addAccountId:0,addAccountName:"",begName:null,elderlyName:null,elderlyPhoto:null,elderlyGender:null,elderlyIdCard:null,houseName:null,buildingName:"",pictures:[]}),_=[{type:"selection",width:"50"},{label:"序号",prop:"id",width:"100px"},{label:"标题",slot:"title"},{label:"发布人",prop:"elderlyName"},{label:"发布时间",prop:"addTime"},{label:"类型",prop:"type"},{label:"状态",slot:"state"},{label:"操作",slot:"operate",width:180,fixed:"right"}],D=()=>{s.type="",s.state="",s.addTime="",s.elderlyName=null},x=g(!1),V=g(),h=i=>{V.value=i,x.value=!0},o=g(!1),C=i=>{V.value=i,o.value=!0},M=()=>{y.value?.refresh(),k.success("操作成功")},y=g(null),I=async i=>{G.confirm("是否删除该条记录？",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{k({type:"success",message:"删除成功"}),await Z(i),y.value?.refresh()}).catch(()=>{k({type:"info",message:"已取消删除"})})},b=g([]),Y=i=>{b.value=i.map(e=>e.id)},E=async()=>{b.value.length!==0&&(await G.confirm(`确定删除这${b.value.length}项数据吗? 删除后无法恢复`,"警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await ee(b.value),b.value=[],y.value?.refresh(),k.success("删除成功"))},u=async i=>{const e={...i};return e.addTime&&Array.isArray(e.addTime)&&e.addTime.length===2&&(e.startTime=e.addTime[0],e.endTime=e.addTime[1],delete e.addTime),await X(e)},n=()=>{y.value?.refresh(),k.success("查询成功")};return(i,e)=>{const U=r("el-input"),v=r("el-form-item"),q=r("el-date-picker"),A=r("el-option"),j=r("el-select"),c=r("el-button"),d=r("el-form"),z=r("el-card"),H=r("el-text");return w(),T(N,null,[l(z,{style:{"margin-bottom":"10px"}},{default:t(()=>[l(d,{model:s,"label-width":"auto",inline:""},{default:t(()=>[l(v,{label:"发布人"},{default:t(()=>[l(U,{modelValue:s.elderlyName,"onUpdate:modelValue":e[0]||(e[0]=a=>s.elderlyName=a),clearable:"",placeholder:"请输入姓名",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),l(v,{label:"发布时间"},{default:t(()=>[l(q,{modelValue:s.addTime,"onUpdate:modelValue":e[1]||(e[1]=a=>s.addTime=a),type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间",style:{width:"350px"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",clearable:""},null,8,["modelValue"])]),_:1}),l(v,{label:"类型"},{default:t(()=>[l(j,{modelValue:s.type,"onUpdate:modelValue":e[2]||(e[2]=a=>s.type=a),placeholder:"请选择类型",clearable:"",style:{width:"180px"}},{default:t(()=>[(w(),T(N,null,B(f,a=>l(A,{key:a,label:a.value,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(v,{label:"状态"},{default:t(()=>[l(j,{modelValue:s.state,"onUpdate:modelValue":e[3]||(e[3]=a=>s.state=a),placeholder:"请选择状态",clearable:"",style:{width:"180px"}},{default:t(()=>[(w(),T(N,null,B($,a=>l(A,{key:a,label:a.value,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(v,null,{default:t(()=>[l(c,{type:"primary",onClick:n},{default:t(()=>[...e[6]||(e[6]=[m("查询",-1)])]),_:1}),l(c,{onClick:D},{default:t(()=>[...e[7]||(e[7]=[m("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(W,{ref_key:"tableRef",ref:y,columns:_,"fetch-data":u,"init-params":s,onSelectionChange:Y},{buttons:t(()=>[l(c,{type:"success",onClick:C},{default:t(()=>[...e[8]||(e[8]=[m("添加",-1)])]),_:1}),l(c,{type:"danger",onClick:E,disabled:b.value.length===0},{default:t(()=>[...e[9]||(e[9]=[m("批量删除",-1)])]),_:1},8,["disabled"])]),title:t(({row:a})=>[l(c,{link:"",type:"primary",onClick:R=>C(a)},{default:t(()=>[m(L(a.title),1)]),_:2},1032,["onClick"])]),state:t(({row:a})=>[l(H,{type:a.state==="已解决"?"success":"danger"},{default:t(()=>[m(L(a.state),1)]),_:2},1032,["type"])]),operate:t(({row:a})=>[l(c,{link:"",type:"primary",onClick:R=>h(a)},{default:t(()=>[...e[10]||(e[10]=[m("详情",-1)])]),_:1},8,["onClick"]),l(c,{link:"",type:"primary",onClick:R=>C(a)},{default:t(()=>[...e[11]||(e[11]=[m("编辑",-1)])]),_:1},8,["onClick"]),l(c,{link:"",type:"danger",onClick:R=>I(a.id)},{default:t(()=>[...e[12]||(e[12]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1},8,["init-params"]),l(Q,{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=a=>x.value=a),"detail-data":V.value},null,8,["modelValue","detail-data"]),l(te,{modelValue:o.value,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value=a),"detail-data":V.value,onSuccess:M},null,8,["modelValue","detail-data"])],64)}}});export{de as default};
